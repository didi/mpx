<template>
  <view testID="homePage">
    <text class="title">MPX RN DEMO</text>
    <view class="block">
      <text>计数器：</text>
      <text testID="counter">{{count}}</text>
      <button testID="counterBtn" class="btn" bindtap="incCount">+2</button>
    </view>
    <view class="block">
      <text>输入：</text>
      <input testID="input" value="{{inputVal}}" bindinput="onInput" class="input"/>
      <text testID="inputResult">{{inputVal}}</text>
    </view>
    <view class="block">
      <text>列表渲染：</text>
      <view wx:for="{{list}}" wx:for-index="idx" wx:key="*this" testID="listItem-{{idx}}" class="list-item">
        <text>{{item}}</text>
      </view>
    </view>

    <view class="margin20"><text testID="page2-defs">defs: {{__testDef__}}</text></view>

    <view class="margin20"><text testID="page2-mixins">mixins data: {{ list.tv }}</text></view>

    <!--i18n 测试使用-->
    <view class="margin20"><text testID="page2-i18n">i18n: {{ $t('message.hello', { msg: 'hello' }) }}</text></view>
  </view>
</template>

<script>
  import mpx, { createPage } from '@mpxjs/core'
  import store from '../store'
  import { mapState, mapActions } from '@mpxjs/pinia'
  import mixins from '../mixins'

  createPage({
    data: {
      inputVal: '',
      list: ['Apple', 'Banana', 'Orange']
    },
    mixins: [mixins],
    computed: {
      ...mapState(store, ['count']),
    },
    methods: {
      ...mapActions(store, ['increment']),
      incCount() {
        this.increment()
      },
      onInput(e) {
        this.inputVal = e.detail.value
      }
    }
  })
</script>

<style scoped>
.title {
  font-size: 20px;
  font-weight: bold;
}
.block {
  margin: 12px 0;
}
.btn {
}
.input {
  border: 1px solid #ddd;
  padding: 4px 8px;
}
.list-item {
  padding: 2px 0;
}
.margin20 {
  margin: 50px;
}
</style>