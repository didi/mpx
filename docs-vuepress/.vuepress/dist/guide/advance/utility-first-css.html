<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用原子类 | Mpx框架</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script type="text/javascript">(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "jtvvy52wxy");</script>
    <meta name="description" content="Mpxjs 是滴滴开源的支持跨端开发、深度性能优化的增强型小程序开发框架。使用 Mpxjs 帮助你更好开发小程序，拥有类似 VueJS 的数据响应能力，在降低研发心智负担的同时比原生小程序性能更好，完全基于原生小程序语法保障了最少的坑，一次开发多端生效同时支持微信小程序、支付宝小程序、抖音小程序、百度小程序、Web H5。">
    
    <link rel="preload" href="/assets/css/0.styles.f22478ca.css" as="style"><link rel="preload" href="/assets/js/app.84c88b57.js" as="script"><link rel="preload" href="/assets/js/7.01e4e942.js" as="script"><link rel="preload" href="/assets/js/3.145e69cd.js" as="script"><link rel="preload" href="/assets/js/1.4f7abe8f.js" as="script"><link rel="preload" href="/assets/js/82.56c0d7c1.js" as="script"><link rel="preload" href="/assets/js/30.04d1a7ea.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.f22478ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><div class="content-wrapper"><div class="container"><div class="theme-container"><header class="header" data-v-3ad594c3><!----> <div class="head-container" data-v-3ad594c3><a href="/" data-v-3ad594c3><div class="logo" data-v-3ad594c3>mpx</div></a> <div class="row" data-v-3ad594c3><div class="header__line" data-v-3ad594c3></div> <nav class="nav" data-v-3ad594c3><a href="/guide/basic/start.html" class="nav-link" data-v-3ad594c3>
          指南
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="/api/" class="nav-link" data-v-3ad594c3>
          API
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="/articles/" class="nav-link" data-v-3ad594c3>
          文章
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="https://github.com/didi/mpx/releases" target="_blank" class="nav-link" data-v-3ad594c3>
          更新记录
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="https://github.com/didi/mpx" target="_blank" class="nav-link" data-v-3ad594c3>
          GitHub
          <!----></a></nav> <div class="searchBox-wrapper" data-v-3ad594c3><div class="searchBox" data-v-3ad594c3><form id="search-form" role="search" class="algolia-search-wrapper search-box" data-v-3ad594c3><div id="docsearch-container"></div></form></div></div></div></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/basic/start.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/index.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/articles/index.html" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="https://github.com/didi/mpx/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更新记录
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/didi/mpx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/basic/start.html" class="sidebar-link">快速开始</a></li><li><a href="/guide/basic/intro.html" class="sidebar-link">介绍</a></li><li><a href="/guide/basic/single-file.html" class="sidebar-link">单文件开发</a></li><li><a href="/guide/basic/ide.html" class="sidebar-link">IDE 高亮配置</a></li><li><a href="/guide/basic/template.html" class="sidebar-link">模板语法</a></li><li><a href="/guide/basic/css.html" class="sidebar-link">CSS 处理</a></li><li><a href="/guide/basic/reactive.html" class="sidebar-link">数据响应</a></li><li><a href="/guide/basic/class-style-binding.html" class="sidebar-link">类名样式绑定</a></li><li><a href="/guide/basic/conditional-render.html" class="sidebar-link">条件渲染</a></li><li><a href="/guide/basic/list-render.html" class="sidebar-link">列表渲染</a></li><li><a href="/guide/basic/event.html" class="sidebar-link">事件处理</a></li><li><a href="/guide/basic/two-way-binding.html" class="sidebar-link">双向绑定</a></li><li><a href="/guide/basic/component.html" class="sidebar-link">自定义组件</a></li><li><a href="/guide/basic/refs.html" class="sidebar-link">获取组件实例/节点信息</a></li><li><a href="/guide/basic/option-chain.html" class="sidebar-link">模版内可选链表达式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advance/store.html" class="sidebar-link">状态管理（store）</a></li><li><a href="/guide/advance/pinia.html" class="sidebar-link">状态管理（pinia）</a></li><li><a href="/guide/advance/mixin.html" class="sidebar-link">使用 mixin</a></li><li><a href="/guide/advance/npm.html" class="sidebar-link">使用npm</a></li><li><a href="/guide/advance/subpackage.html" class="sidebar-link">使用分包</a></li><li><a href="/guide/advance/async-subpackage.html" class="sidebar-link">分包异步化</a></li><li><a href="/guide/advance/platform.html" class="sidebar-link">跨平台</a></li><li><a href="/guide/advance/i18n.html" class="sidebar-link">国际化i18n</a></li><li><a href="/guide/advance/size-report.html" class="sidebar-link">包体积分析</a></li><li><a href="/guide/advance/image-process.html" class="sidebar-link">图像资源处理</a></li><li><a href="/guide/advance/progressive.html" class="sidebar-link">原生渐进迁移</a></li><li><a href="/guide/advance/ability-compatible.html" class="sidebar-link">原生能力兼容</a></li><li><a href="/guide/advance/plugin.html" class="sidebar-link">小程序插件</a></li><li><a href="/guide/advance/custom-output-path.html" class="sidebar-link">自定义路径</a></li><li><a href="/guide/advance/utility-first-css.html" aria-current="page" class="active sidebar-link">使用原子类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advance/utility-first-css.html#compile-config" class="sidebar-link">原子类环境配置</a></li><li class="sidebar-sub-header"><a href="/guide/advance/utility-first-css.html#config-supports" class="sidebar-link">功能支持范围</a></li><li class="sidebar-sub-header"><a href="/guide/advance/utility-first-css.html#utility-supports" class="sidebar-link">工具类可用范围</a></li><li class="sidebar-sub-header"><a href="/guide/advance/utility-first-css.html#attentions" class="sidebar-link">小程序原子类使用注意点</a></li></ul></li><li><a href="/guide/advance/ssr.html" class="sidebar-link">SSR</a></li><li><a href="/guide/advance/provide-inject.html" class="sidebar-link">依赖注入（Provide/Inject）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组合式 API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/composition-api/composition-api.html" class="sidebar-link">组合式 API</a></li><li><a href="/guide/composition-api/reactive-api.html" class="sidebar-link">响应式 API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/tool/ts.html" class="sidebar-link">使用TypeScript开发小程序</a></li><li><a href="/guide/tool/unit-test.html" class="sidebar-link">单元测试</a></li><li><a href="/guide/tool/e2e-test.html" class="sidebar-link">E2E自动化测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/guide/extend" class="sidebar-heading clickable"><span>拓展</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extend/fetch.html" class="sidebar-link">网络请求</a></li><li><a href="/guide/extend/api-proxy.html" class="sidebar-link">Api代理</a></li><li><a href="/guide/extend/mock.html" class="sidebar-link">数据 Mock</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>理解</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/understand/runtime.html" class="sidebar-link">Mpx运行时增强原理</a></li><li><a href="/guide/understand/compile.html" class="sidebar-link">Mpx编译构建原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>迁移</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/migrate/2.9.html" class="sidebar-link">从 2.8 升级至 2.9</a></li><li><a href="/guide/migrate/2.8.html" class="sidebar-link">从 2.7 升级至 2.8</a></li><li><a href="/guide/migrate/2.7.html" class="sidebar-link">从旧版本迁移至 2.7</a></li><li><a href="/guide/migrate/mpx-cli-3.html" class="sidebar-link">mpx-cli v2 迁移到 v3</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="使用原子类"><a href="#使用原子类" class="header-anchor">#</a> 使用原子类</h1> <p>原子类(utility-first CSS)是近几年流行起来的一种全新的样式开发方式，在前端社区内取得了良好的口碑，越来越多的主流网站也基于原子类进行开发，我们耳熟能详的有<a href="https://github.com/" target="_blank" rel="noopener noreferrer">Github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://openai.com/" target="_blank" rel="noopener noreferrer">OpenAI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://top10.netflix.com/" target="_blank" rel="noopener noreferrer">Netflix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
和<a href="https://www.jpl.nasa.gov/" target="_blank" rel="noopener noreferrer">NASA官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
等。使用原子类离不开原子类框架的支持，常用的原子类框架有 <a href="https://tailwindcss.com/" target="_blank" rel="noopener noreferrer">Tailwindcss<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://windicss.org/" target="_blank" rel="noopener noreferrer">Windicss<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
和 <a href="https://unocss.dev/" target="_blank" rel="noopener noreferrer">Unocss<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等，而在 <strong>Mpx2.9</strong> 以后，我们在框架中内置了基于 unocss
的原子类支持，让小程序开发也能使用原子类。对项目进行简单配置开启原子类支持后，用户就可以在 Mpx
页面/组件模板中直接使用一些预定义的基础样式类，诸如flex，pt-4，text-center 和 rotate-90 等，对样式进行组合定义，并且在 Mpx 支持的所有小程序平台和 web 平台中正常运行，下面是一个简单示例：</p> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>py-8 px-8 inline-flex mx-auto bg-white rounded-xl shadow-md<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-base text-black font-semibold mb-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          Erin Lindford
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-gray-500 font-medium pb-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          Product Engineer
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-2 px-4 py-1 text-sm text-purple-600 font-semibold rounded-full border border-solid border-purple-200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          Message
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>通过这种方式，我们在不编写任何自定义样式代码的情况下得到了一张简单的个人卡片，实际渲染效果如下：</p> <p><img src="https://dpubstatic.udache.com/static/dpubimg/Or3aaN-mmxV8pK-LmEVPm_demo.png" alt="utility-css-demo"></p> <p>相较于传统的自定义类编写样式的方式，使用原子类能给你带来以下这些好处：</p> <ul><li><strong>不用再烦恼于为自定义类取类名</strong>，传统样式开发中，我们仅仅是为某个元素定义样式就需要绞尽脑汁发明一些抽象的类名，还得提防类名冲突，使用原子类可以完全将你从这种琐碎无趣的工作中解放；</li> <li><strong>停止css体积的无序增长</strong>，传统样式开发中，css体积会随着你的迭代不断增长，而在原子类中，一切样式都可以复用，你几乎不需要编写新的css；</li> <li><strong>让调整样式变得更加安全</strong>，传统css是全局的，当你修改某个样式时无法保障其不会破坏其他地方的样式，而你在模板中使用的原子类是本地的，你完全不用担心修改它会影响其他地方。</li></ul> <p>而相较于使用内联样式，原子类也有一些重要的优势：</p> <ul><li><strong>约束下的设计</strong>，使用内联样式时，里面的每一个数值都是魔法数字(magic number)
，而通过原子工具类，你可以选择一些符合预定义设计规范的样式，便于构筑具有视觉一致性的UI；</li> <li><strong>响应式设计</strong>，你无法在内联样式中使用媒体查询，然而通过原子类框架中提供的响应式工具，你可以轻而易举地构建出响应式界面；</li> <li><strong>Hover、focus和其他状态</strong>，使用内联样式无法定义特定状态下的样式，如hover和focus，通过原子类框架的状态变量能力，我们可以轻松为这些状态定义样式。</li></ul> <p>看到这里相信你已经迫不及待地想要在 Mpx 中体验原子类开发了吧，可以根据下面的指南开启你的原子类之旅。</p> <h2 id="compile-config"><a href="#compile-config" class="header-anchor">#</a> 原子类环境配置 </h2> <p>如果你想在新项目中使用原子类，可以使用最新版本的 <code>@mpxjs/cli</code> 创建项目，在 prompt 中选择使用原子类，就可以在新创建的项目模版中直接使用 unocss 的原子类，关于可使用的工具类可参考 <a href="https://unocss.dev/interactive/" target="_blank" rel="noopener noreferrer">unocss 交互示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>及本指南下方的<a href="#%E5%B7%A5%E5%85%B7%E7%B1%BB%E6%94%AF%E6%8C%81%E8%8C%83%E5%9B%B4">工具类支持范围</a>。</p> <blockquote><p>与 web 中使用 unocss 不同，在 Mpx 中使用 unocss 不需要显式引入虚拟模块 <code>import 'uno.css'</code> 来承载生成的样式内容，这是由于在
Mpx 中，我们充分考虑到小程序分包架构的特殊性和主包体积的重要性，结合 Mpx
强大的分包构建能力，对生成的原子工具类的使用情况进行分析，将其自动注入到合适的主包或者分包中，来达到全局体积分配的最优（在没有内容冗余的情况下尽可能输出到分包）。</p></blockquote> <p>对于使用 <code>@mpxjs/cli@3.0</code> 新版脚手架创建的项目，可以在项目初始化时选择<code>需要使用原子类</code>
选项，或在已有项目下执行<code>mpx add @mpxjs/vue-cli-plugin-mpx-utility-first-css</code>以激活原子类相关编译配置。</p> <p>对于使用旧版脚手架创建的项目，可以通过修改项目编译配置以激活原子类支持：</p> <ol><li>安装相关依赖：</li></ol> <div class="language-json5 extra-class"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@mpxjs/unocss-base&quot;</span><span class="token operator">:</span> <span class="token string">'^2.9.0'</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@mpxjs/unocss-plugin&quot;</span><span class="token operator">:</span> <span class="token string">'^2.9.0'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>新建uno.config.js，基础配置内容如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'unocss'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> presetMpx <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@mpxjs/unocss-base'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">presetMpx</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>注册<code>MpxUnocssPlugin</code>，在<code>build/getPlugins</code>中添加如下代码：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MpxUnocssPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@mpxjs/unocss-plugin'</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MpxUnocssPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>即可在项目模版中使用基于<code>unocss</code>的原子类功能，<code>unocss</code>默认的preset兼容<code>tailwindcss</code>/<code>windicss</code>
，可以通过查阅<a href="https://tailwindcss.com/docs/installation" target="_blank" rel="noopener noreferrer">tailwindcss文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://windicss.org/utilities/general/colors.html" target="_blank" rel="noopener noreferrer">windicss文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或<a href="https://unocss.dev/interactive/" target="_blank" rel="noopener noreferrer">unocss可交互文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>进行探索使用。</p> <p>关于<code>uno.config.js</code>可用配置项及<code>@mpxjs/unocss-plugin</code>及<code>@mpxjs/unocss-base</code>的配置项请参考<a href="/api/compile.html#mpxunocssplugin-配置">API文档</a></p> <h3 id="vscode插件支持"><a href="#vscode插件支持" class="header-anchor">#</a> vscode插件支持</h3> <p>推荐使用unocss官方插件https://unocss.dev/integrations/vscode
mpx文件则需要在unocss.config.js添加如下参数才能生效</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'unocss'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.mpx($|\?)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="config-supports"><a href="#config-supports" class="header-anchor">#</a> 功能支持范围 </h2> <p>我们支持了<code>unocss</code>大部分的配置项及功能，并针对小程序技术规范提供了一些额外的功能支持，如分包输出和样式隔离等功能，以下为详细功能支持范围。</p> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Load Config</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">支持windi默认的全部配置文件路径，并支持在plugin options中手动传入配置对象或配置文件路径</td></tr> <tr><td style="text-align:left;">Rules</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Shortcuts</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Theme</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Variants</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Extractors</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Transformers</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">内建支持variant groups、directives和alias，不支持自定义transformers</td></tr> <tr><td style="text-align:left;">Preflights</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">支持内建和自定义preflight配置</td></tr> <tr><td style="text-align:left;">Presets</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Safelist</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">支持全局配置和模版注释语法局部配置声明safelist</td></tr> <tr><td style="text-align:left;">Value Auto-infer</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Variant Groups</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Directives</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Alias</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Attributify Mode</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序模版不支持不识别的自定义属性</td></tr> <tr><td style="text-align:left;">Responsive Design</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Dark Mode</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Important Prefix</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Layers Ordering</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">分包输出/公共样式抽离</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">可通过设置<code>@mpxjs/unocss-plugin</code>配置项<code>minCount</code>决定公共样式范围</td></tr> <tr><td style="text-align:left;">组件分包异步/组件样式隔离</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">可通过全局配置和模版注释语法局部配置<code>styleIsolation='isolated'</code>支持相关场景的原子类使用</td></tr> <tr><td style="text-align:left;">Rpx样式单位</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">小程序类名特殊字符转义</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">静态类名和动态类名均以支持</td></tr> <tr><td style="text-align:left;">跨平台输出</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">支持输出Mpx已支持的所有小程序平台及Web</td></tr></tbody></table> <h2 id="utility-supports"><a href="#utility-supports" class="header-anchor">#</a> 工具类可用范围 </h2> <p>经过我们的详细测试，大部分<code>unocss</code>
提供的工具类都能在小程序环境下正常工作，但是也有部分工具类由于小程序底层环境差异无法正常运行，以下是详细的测试结果，参考<a href="https://windicss.org/utilities/general/colors.html" target="_blank" rel="noopener noreferrer">windicss文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
进行分类组织。</p> <h3 id="general"><a href="#general" class="header-anchor">#</a> General</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Colors</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Typography</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">不支持子项：Font Variant Numeric Tab Size</td></tr> <tr><td style="text-align:left;">SVG</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持svg标签</td></tr> <tr><td style="text-align:left;">Variants</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">不支持子项：Child Selectors，因为小程序不支持*选择器</td></tr></tbody></table> <h3 id="accessibility"><a href="#accessibility" class="header-anchor">#</a> Accessibility</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Screen Readers</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr></tbody></table> <h3 id="animations"><a href="#animations" class="header-anchor">#</a> Animations</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Animation</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Transforms</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Transitions</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr></tbody></table> <h3 id="backgrounds"><a href="#backgrounds" class="header-anchor">#</a> Backgrounds</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Background Attachment</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Clip</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Color</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Opacity</td> <td style="text-align:left;">支持</td> <td style="text-align:left;">需要和Background Color一起使用</td></tr> <tr><td style="text-align:left;">Background Position</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Repeat</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Size</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Origin</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Gradient Direction</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Gradient From</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Gradient Via</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Gradient To</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Background Blend Mode</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr></tbody></table> <h3 id="behaviors"><a href="#behaviors" class="header-anchor">#</a> Behaviors</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Box Decoration Break</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Image Rendering</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">image-render-edge 真机不支持</td></tr> <tr><td style="text-align:left;">Listings</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Overflow</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Overscroll Behavior</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Placeholder</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">微信小程序 input 需要通过 placeholder-style 设置 placeholder 样式</td></tr></tbody></table> <h3 id="borders"><a href="#borders" class="header-anchor">#</a> Borders</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Border Radius</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Border Width</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Border Color</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Border Opacity</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Border Style</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Divider Width</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的css选择器</td></tr> <tr><td style="text-align:left;">Divider Color</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的css选择器</td></tr> <tr><td style="text-align:left;">Divider Opacity</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的css选择器</td></tr> <tr><td style="text-align:left;">Divider Style</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的css选择器</td></tr> <tr><td style="text-align:left;">Outline</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Outline Solid</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Outline Dotted</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Ring Width</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Ring Color</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Ring Opacity</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Ring Offset Width</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Ring Offset Color</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr></tbody></table> <h3 id="effects"><a href="#effects" class="header-anchor">#</a> Effects</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Box Shadow</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Opacity</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Mix Blend Mode</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr></tbody></table> <h3 id="filters"><a href="#filters" class="header-anchor">#</a> Filters</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Filter</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Backdrop Filter</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr></tbody></table> <h3 id="interactivity"><a href="#interactivity" class="header-anchor">#</a> Interactivity</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Accent Color</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Appearance</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Cursor</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Caret</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Pointer Events</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Resize</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Scroll Behavior</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Touch Action</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">User Select</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr> <tr><td style="text-align:left;">Will Change</td> <td style="text-align:left;">不支持</td> <td style="text-align:left;">小程序不支持生成的样式</td></tr></tbody></table> <h3 id="layout"><a href="#layout" class="header-anchor">#</a> Layout</h3> <table><thead><tr><th style="text-align:left;">功能</th> <th style="text-align:left;">支持度</th> <th style="text-align:left;">备注</th></tr></thead> <tbody><tr><td style="text-align:left;">Columns</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Container</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Display</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Flex</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Grid</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Positioning</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">小程序图片设置object-fit 无效，可使用mode代替</td></tr> <tr><td style="text-align:left;">Sizing</td> <td style="text-align:left;">支持</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">Spacing</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">Space Between小程序不支持生成的css选择器</td></tr> <tr><td style="text-align:left;">Tables</td> <td style="text-align:left;">部分支持</td> <td style="text-align:left;">小程序不支持部分table样式</td></tr></tbody></table> <h2 id="attentions"><a href="#attentions" class="header-anchor">#</a> 小程序原子类使用注意点 </h2> <p>小程序由于底层环境差异，我们在支持和使用原子类时有一些特殊的注意点。</p> <h3 id="escape"><a href="#escape" class="header-anchor">#</a> 特殊字符转义 </h3> <p>基于<code>unocss</code>的原子类支持<code>value auto-infer</code>（值自动推导），可以在模版中根据相关规则书写灵活的自定义值原子类，如<code>p-5px bg-[hsl(211.7,81.9%,69.6%)]</code>等，针对原子类中出现的<code>[</code> <code>(</code> <code>,</code>等特殊字符，在web中会通过转义字符<code>\</code>进行转义，由于小程序环境下不支持css选择器中出现<code>\</code>转义字符，我们内置支持了一套不带<code>\</code>的转义规则对这些特殊字符进行转义，同时替换模版和css文件中的类名，内建的默认转义规则如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> escapeMap <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'('</span><span class="token operator">:</span> <span class="token string">'_pl_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">')'</span><span class="token operator">:</span> <span class="token string">'_pr_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'['</span><span class="token operator">:</span> <span class="token string">'_bl_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">']'</span><span class="token operator">:</span> <span class="token string">'_br_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'{'</span><span class="token operator">:</span> <span class="token string">'_cl_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'}'</span><span class="token operator">:</span> <span class="token string">'_cr_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'#'</span><span class="token operator">:</span> <span class="token string">'_h_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'!'</span><span class="token operator">:</span> <span class="token string">'_i_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'/'</span><span class="token operator">:</span> <span class="token string">'_s_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'.'</span><span class="token operator">:</span> <span class="token string">'_d_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">':'</span><span class="token operator">:</span> <span class="token string">'_c_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">','</span><span class="token operator">:</span> <span class="token string">'_2c_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'%'</span><span class="token operator">:</span> <span class="token string">'_p_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'\''</span><span class="token operator">:</span> <span class="token string">'_q_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'&quot;'</span><span class="token operator">:</span> <span class="token string">'_dq_'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'+'</span><span class="token operator">:</span> <span class="token string">'_a_'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">$</span><span class="token operator">:</span> <span class="token string">'_si_'</span><span class="token punctuation">,</span>
    <span class="token comment">// unknown用于兜底不在上述范围中未知的转义字符</span>
    <span class="token literal-property property">unknown</span><span class="token operator">:</span> <span class="token string">'_u_'</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>与此同时，用户也可以通过传递<code>@mpxjs/unocss-plugin</code>的<a href="/api/compile.html#escapeMap"><code>escapeMap</code>配置项</a>来覆盖内建的转义规则。</p> <h3 id="subpackage"><a href="#subpackage" class="header-anchor">#</a> 原子类分包输出 </h3> <p>在web中，原子类会被全部打包输出单个样式文件，一般会放置在顶层样式表中以供全局访问，但在小程序中这种全量的输出策略并不是最优的，主要原因在于小程序中可供全局访问的主包体积存在<strong>2M大小限制</strong>，主包体积十分紧缺珍贵，Mpx在构建输出时遵循着分包优先的原则，尽可能充分利用分包体积从而减少对主包体积的占用，再进行原子类产物输出时，我们也遵循了相同的原则。</p> <p>在Mpx中，我们在收集原子类时同时记录了每个原子类的引用分包，在收集结束后根据每个原子类的分包引用数量决定该原子类应该输出到主包还是分包当中，我们在<code>@mpxjs/unocss-plugin</code>中提供了<a href="/api/compile.html#minCount"><code>minCount</code>配置项</a>来决定分包的输出规则，该配置项的默认值为2，即当一个原子类被2个或以上分包引用时，会被作为公共原子类抽取到主包中，否则输出到所属分包中，这也是全局最优的策略。当我们想要让原子类输出产物更少地占用主包体积时，我们也可以将<code>minCount</code>值调大，让原子类抽取到主包的条件更加苛刻，不过这样也会伴随着原子类分包冗余的增加。</p> <p><code>unocss.config.js</code>配置中定义的<code>safelist</code>原子类默认会输出到主包，为了组件局部使用的<code>safelist</code>有输出到分包的机会，我们在模版中提供了<a href="/api/compile.html#commentConfig"><code>注释配置</code></a>（comments config），灵感来源于<code>webpack</code>中的魔法注释（magic comments），用户可以在组件模版中通过<code>注释配置</code>声明当前组件所需的<code>safelist</code>，对应的原子类也会根据上述的规则输出到主包或分包中，使用示例如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mpx_config_safelist: 'text-red-500 bg-blue-500' --&gt;</span>
    <span class="token comment">&lt;!-- 动态样式中可以使用text-red-500和bg-blue-500原子类 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{classObj}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="style-isolation"><a href="#style-isolation" class="header-anchor">#</a> 样式隔离与组件分包异步 </h3> <p>在小程序中，自定义组件的样式默认是隔离的，web中通过全局样式访问原子类的方式不再生效，不过由于小程序提供了<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB" target="_blank" rel="noopener noreferrer">样式隔离配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，我们可以将该组件样式隔离配置调整为<code>apply-shared</code>来获取页面或app中定义的原子类，但是当我们在使用传统类名和原子类混合开发或者迁移原子类的过程中，我们往往希望保留原本自定义组件的样式隔离。</p> <p>针对这种情况，我们在<code>@mpxjs/unocss-plugin</code>中提供了<a href="/api/compile.html#styleIsolation"><code>styleIsolation</code>配置项</a>，可选设置为<code>isolated</code>|<code>apply-shared</code>，当设置为<code>isolated</code>时每个组件都会通过<code>@import</code>独立引用主包或者分包的原子类样式文件，因此不会受到样式隔离的影响；当设置为<code>apply-shared</code>时，只有app和分包页面会引用对应的原子类样式文件，自定义组件需要通过配置样式隔离为<code>apply-shared</code>使原子类生效。</p> <p>在组件分包异步的情况下对应组件即使将样式隔离配置为<code>apply-shared</code>的情况下，<code>@mpxjs/unocss-plugin</code>也需要将<code>styleIsolation</code>设置为<code>isolated</code>才能正常工作，原因在于组件分包异步的情况下，组件被其他分包的页面所引用渲染，由于上述原子类样式分包输出的规则，其他分包的页面中可能并不包含当前组件所需的原子类，只有在<code>isolated</code>模式下由组件自身引用所需的原子类样式才能保证正常work，类似于<code>safelist</code>，我们也提供了<a href="/api/compile.html#commentConfig"><code>注释配置</code></a>的方式对组件的<code>styleIsolation</code>模式进行局部配置，示例如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mpx_config_styleIsolation: 'isolated' --&gt;</span>
    <span class="token comment">&lt;!-- 当前组件会直接引用对应主包或分包的原子类样式 --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@dark:(text-white bg-dark-500)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/advance/custom-output-path.html" class="prev">
        自定义路径
      </a></span> <span class="next"><a href="/guide/advance/ssr.html">
        SSR
      </a>
      →
    </span></p></div> </main></div></div></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.84c88b57.js" defer></script><script src="/assets/js/7.01e4e942.js" defer></script><script src="/assets/js/3.145e69cd.js" defer></script><script src="/assets/js/1.4f7abe8f.js" defer></script><script src="/assets/js/82.56c0d7c1.js" defer></script><script src="/assets/js/30.04d1a7ea.js" defer></script>
  </body>
</html>
