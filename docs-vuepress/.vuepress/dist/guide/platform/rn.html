<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨端输出RN | Mpx框架</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <script type="text/javascript">(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "jtvvy52wxy");</script>
    <meta name="description" content="Mpxjs 是滴滴开源的支持跨端开发、深度性能优化的增强型小程序开发框架。使用 Mpxjs 帮助你更好开发小程序，拥有类似 VueJS 的数据响应能力，在降低研发心智负担的同时比原生小程序性能更好，完全基于原生小程序语法保障了最少的坑，一次开发多端生效同时支持微信小程序、支付宝小程序、抖音小程序、百度小程序、Web H5。">
    
    <link rel="preload" href="/assets/css/0.styles.f22478ca.css" as="style"><link rel="preload" href="/assets/js/app.84c88b57.js" as="script"><link rel="preload" href="/assets/js/7.01e4e942.js" as="script"><link rel="preload" href="/assets/js/3.145e69cd.js" as="script"><link rel="preload" href="/assets/js/1.4f7abe8f.js" as="script"><link rel="preload" href="/assets/js/109.3da50cc1.js" as="script"><link rel="preload" href="/assets/js/30.04d1a7ea.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.f22478ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><div class="content-wrapper"><div class="container"><div class="theme-container"><header class="header" data-v-3ad594c3><!----> <div class="head-container" data-v-3ad594c3><a href="/" data-v-3ad594c3><div class="logo" data-v-3ad594c3>mpx</div></a> <div class="row" data-v-3ad594c3><div class="header__line" data-v-3ad594c3></div> <nav class="nav" data-v-3ad594c3><a href="/guide/basic/start.html" class="nav-link" data-v-3ad594c3>
          指南
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="/api/" class="nav-link" data-v-3ad594c3>
          API
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="/articles/" class="nav-link" data-v-3ad594c3>
          文章
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="https://github.com/didi/mpx/releases" target="_blank" class="nav-link" data-v-3ad594c3>
          更新记录
          <!----></a></nav><nav class="nav" data-v-3ad594c3><a href="https://github.com/didi/mpx" target="_blank" class="nav-link" data-v-3ad594c3>
          GitHub
          <!----></a></nav> <div class="searchBox-wrapper" data-v-3ad594c3><div class="searchBox" data-v-3ad594c3><form id="search-form" role="search" class="algolia-search-wrapper search-box" data-v-3ad594c3><div id="docsearch-container"></div></form></div></div></div></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/basic/start.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/index.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/articles/index.html" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="https://github.com/didi/mpx/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  更新记录
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/didi/mpx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/basic/start.html" class="sidebar-link">快速开始</a></li><li><a href="/guide/basic/intro.html" class="sidebar-link">介绍</a></li><li><a href="/guide/basic/single-file.html" class="sidebar-link">单文件开发</a></li><li><a href="/guide/basic/ide.html" class="sidebar-link">IDE 高亮配置</a></li><li><a href="/guide/basic/template.html" class="sidebar-link">模板语法</a></li><li><a href="/guide/basic/css.html" class="sidebar-link">CSS 处理</a></li><li><a href="/guide/basic/reactive.html" class="sidebar-link">数据响应</a></li><li><a href="/guide/basic/class-style-binding.html" class="sidebar-link">类名样式绑定</a></li><li><a href="/guide/basic/conditional-render.html" class="sidebar-link">条件渲染</a></li><li><a href="/guide/basic/list-render.html" class="sidebar-link">列表渲染</a></li><li><a href="/guide/basic/event.html" class="sidebar-link">事件处理</a></li><li><a href="/guide/basic/two-way-binding.html" class="sidebar-link">双向绑定</a></li><li><a href="/guide/basic/component.html" class="sidebar-link">自定义组件</a></li><li><a href="/guide/basic/refs.html" class="sidebar-link">获取组件实例/节点信息</a></li><li><a href="/guide/basic/option-chain.html" class="sidebar-link">模版内可选链表达式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advance/store.html" class="sidebar-link">状态管理（store）</a></li><li><a href="/guide/advance/pinia.html" class="sidebar-link">状态管理（pinia）</a></li><li><a href="/guide/advance/mixin.html" class="sidebar-link">使用 mixin</a></li><li><a href="/guide/advance/npm.html" class="sidebar-link">使用npm</a></li><li><a href="/guide/advance/subpackage.html" class="sidebar-link">使用分包</a></li><li><a href="/guide/advance/async-subpackage.html" class="sidebar-link">分包异步化</a></li><li><a href="/guide/advance/platform.html" class="sidebar-link">跨平台</a></li><li><a href="/guide/advance/i18n.html" class="sidebar-link">国际化i18n</a></li><li><a href="/guide/advance/size-report.html" class="sidebar-link">包体积分析</a></li><li><a href="/guide/advance/image-process.html" class="sidebar-link">图像资源处理</a></li><li><a href="/guide/advance/progressive.html" class="sidebar-link">原生渐进迁移</a></li><li><a href="/guide/advance/ability-compatible.html" class="sidebar-link">原生能力兼容</a></li><li><a href="/guide/advance/plugin.html" class="sidebar-link">小程序插件</a></li><li><a href="/guide/advance/custom-output-path.html" class="sidebar-link">自定义路径</a></li><li><a href="/guide/advance/utility-first-css.html" class="sidebar-link">使用原子类</a></li><li><a href="/guide/advance/ssr.html" class="sidebar-link">SSR</a></li><li><a href="/guide/advance/provide-inject.html" class="sidebar-link">依赖注入（Provide/Inject）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组合式 API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/composition-api/composition-api.html" class="sidebar-link">组合式 API</a></li><li><a href="/guide/composition-api/reactive-api.html" class="sidebar-link">响应式 API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/tool/ts.html" class="sidebar-link">使用TypeScript开发小程序</a></li><li><a href="/guide/tool/unit-test.html" class="sidebar-link">单元测试</a></li><li><a href="/guide/tool/e2e-test.html" class="sidebar-link">E2E自动化测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/guide/extend" class="sidebar-heading clickable"><span>拓展</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extend/fetch.html" class="sidebar-link">网络请求</a></li><li><a href="/guide/extend/api-proxy.html" class="sidebar-link">Api代理</a></li><li><a href="/guide/extend/mock.html" class="sidebar-link">数据 Mock</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>理解</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/understand/runtime.html" class="sidebar-link">Mpx运行时增强原理</a></li><li><a href="/guide/understand/compile.html" class="sidebar-link">Mpx编译构建原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>迁移</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/migrate/2.9.html" class="sidebar-link">从 2.8 升级至 2.9</a></li><li><a href="/guide/migrate/2.8.html" class="sidebar-link">从 2.7 升级至 2.8</a></li><li><a href="/guide/migrate/2.7.html" class="sidebar-link">从旧版本迁移至 2.7</a></li><li><a href="/guide/migrate/mpx-cli-3.html" class="sidebar-link">mpx-cli v2 迁移到 v3</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="跨端输出rn"><a href="#跨端输出rn" class="header-anchor">#</a> 跨端输出RN</h1> <p>大致介绍</p> <h2 id="跨端样式定义"><a href="#跨端样式定义" class="header-anchor">#</a> 跨端样式定义</h2> <h3 id="css选择器"><a href="#css选择器" class="header-anchor">#</a> CSS选择器</h3> <h3 id="样式单位"><a href="#样式单位" class="header-anchor">#</a> 样式单位</h3> <h3 id="文本样式继承"><a href="#文本样式继承" class="header-anchor">#</a> 文本样式继承</h3> <h3 id="简写样式属性"><a href="#简写样式属性" class="header-anchor">#</a> 简写样式属性</h3> <h3 id="css函数"><a href="#css函数" class="header-anchor">#</a> CSS函数</h3> <h3 id="使用原子类"><a href="#使用原子类" class="header-anchor">#</a> 使用原子类</h3> <h2 id="混合编写rn代码"><a href="#混合编写rn代码" class="header-anchor">#</a> 混合编写RN代码</h2> <h3 id="使用rn组件"><a href="#使用rn组件" class="header-anchor">#</a> 使用RN组件</h3> <h3 id="使用react-hooks"><a href="#使用react-hooks" class="header-anchor">#</a> 使用React hooks</h3> <h2 id="能力支持范围"><a href="#能力支持范围" class="header-anchor">#</a> 能力支持范围</h2> <h3 id="模版语法"><a href="#模版语法" class="header-anchor">#</a> 模版语法</h3> <h4 id="事件处理"><a href="#事件处理" class="header-anchor">#</a> 事件处理</h4> <p>目前 Mpx 输出 React Native 的事件编写遵循小程序的事件编写规范，支持事件的冒泡及捕获</p> <p>普通事件绑定</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view bindtap<span class="token operator">=</span><span class="token string">&quot;handleTap&quot;</span><span class="token operator">&gt;</span>
    Click here<span class="token operator">!</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>绑定并阻止事件冒泡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view catchtap<span class="token operator">=</span><span class="token string">&quot;handleTap&quot;</span><span class="token operator">&gt;</span>
    Click here<span class="token operator">!</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>事件捕获</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view capture<span class="token operator">-</span>bind<span class="token operator">:</span>touchstart<span class="token operator">=</span><span class="token string">&quot;handleTap1&quot;</span><span class="token operator">&gt;</span>
  outer view
  <span class="token operator">&lt;</span>view capture<span class="token operator">-</span>bind<span class="token operator">:</span>touchstart<span class="token operator">=</span><span class="token string">&quot;handleTap2&quot;</span><span class="token operator">&gt;</span>
    inner view
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre></div><p>中断捕获阶段和取消冒泡阶段</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>view capture<span class="token operator">-</span>catch<span class="token operator">:</span>touchstart<span class="token operator">=</span><span class="token string">&quot;handleTap1&quot;</span><span class="token operator">&gt;</span>
  outer view
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

</code></pre></div><p>在此基础上也新增了事件处理内联传参的增强机制。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--Mpx增强语法，模板内联传参，方便简洁--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleTapInline('b')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>b<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 直接通过参数获取数据，直观方便</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleTapInline</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'name:'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>除此之外，Mpx 也支持了动态事件绑定</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!--动态事件绑定--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{items}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleTap_{{index}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{item}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>

  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Item 1'</span><span class="token punctuation">,</span> <span class="token string">'Item 2'</span><span class="token punctuation">,</span> <span class="token string">'Item 3'</span><span class="token punctuation">,</span> <span class="token string">'Item 4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleTap_0</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tapped on item 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleTap_1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tapped on item 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleTap_2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tapped on item 3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleTap_3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tapped on item 4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>注意事项</p> <ol><li>当同一个元素上同时绑定了 catchtap 和 bindtap 事件时，两个事件都会被触发执行。但是是否阻止事件冒泡的行为,会以模板上第一个绑定的事件标识符为准。
如果第一个绑定的是 catchtap，那么不管后面绑定的是什么,都会阻止事件冒泡。如果第一个绑定的是 bindtap，则不会阻止事件冒泡。</li> <li>当同一个元素上绑定了 capture-bind:tap 和 bindtap 事件时，事件的执行时机会根据模板上第一个绑定事件的标识符来决定。如果第一个绑定的是 capture-bind:tap，则事件会在捕获阶段触发，如果第一个绑定的是 bindtap，则事件会在冒泡阶段触发。</li> <li>当使用了事件委托想获取 e.target.dataset 时，只有点击到文本节点才能获取到，点击其他区域无效。建议直接将事件绑定到事件触发的元素上，使用 e.currentTarget 来获取 dataset 等数据。</li> <li>如果元素上设置了 opacity: 0 的样式，会导致 ios 事件无法响应。</li></ol> <h3 id="基础组件"><a href="#基础组件" class="header-anchor">#</a> 基础组件</h3> <p>目前 Mpx 输出 React Native 仅支持以下组件，文档中未提及的组件以及组件属性即为不支持，具体使用范围可参考如下文档</p> <p>RN环境基础组件通用属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>enable-offset</td> <td>Boolean</td> <td>false</td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr> <tr><td>enable-var</td> <td>Boolean</td> <td>true</td> <td>默认支持使用 css variable，若想关闭该功能可设置为 false</td></tr> <tr><td>parent-font-size</td> <td>Number</td> <td></td> <td>父组件字体大小，主要用于百分比计算的场景，如 font-size: 100%</td></tr> <tr><td>parent-width</td> <td>Number</td> <td></td> <td>父组件宽度，主要用于百分比计算的场景，如 width: calc(100% - 20px)，需要在外部传递父组件的宽度</td></tr> <tr><td>parent-height</td> <td>Number</td> <td></td> <td>父组件高度，主要用于百分比计算的场景，如 height: calc(100% - 20px),需要在外部传递父组件的高度</td></tr></tbody></table> <h4 id="view"><a href="#view" class="header-anchor">#</a> view</h4> <p>视图容器。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>hover-class</td> <td>string</td> <td></td> <td>指定按下去的样式类。</td></tr> <tr><td>hover-start-time</td> <td>number</td> <td>50</td> <td>按住后多久出现点击态，单位毫秒</td></tr> <tr><td>hover-stay-time</td> <td>number</td> <td>400</td> <td>手指松开后点击态保留时间，单位毫秒</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td>false</td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindtap</td> <td>点击的时候触发</td></tr></tbody></table> <h4 id="scroll-view"><a href="#scroll-view" class="header-anchor">#</a> scroll-view</h4> <p>可滚动视图区域。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>scroll-x</td> <td>Boolean</td> <td><code>false</code></td> <td>允许横向滚动动</td></tr> <tr><td>scroll-y</td> <td>Boolean</td> <td><code>false</code></td> <td>允许纵向滚动</td></tr> <tr><td>upper-threshold</td> <td>Number</td> <td><code>50</code></td> <td>距顶部/左边多远时(单位 px),触发 scrolltoupper 事件</td></tr> <tr><td>lower-threshold</td> <td>Number</td> <td><code>50</code></td> <td>距底部/右边多远时(单位 px),触发 scrolltolower 事件</td></tr> <tr><td>scroll-top</td> <td>Number</td> <td><code>0</code></td> <td>设置纵向滚动条位置</td></tr> <tr><td>scroll-left</td> <td>Number</td> <td><code>0</code></td> <td>设置横向滚动条位置</td></tr> <tr><td>scroll-with-animation</td> <td>Boolean</td> <td><code>false</code></td> <td>在设置滚动条位置时使用动画过渡</td></tr> <tr><td>enable-back-to-top</td> <td>Boolean</td> <td><code>false</code></td> <td>点击状态栏的时候视图会滚动到顶部</td></tr> <tr><td>enhanced</td> <td>Boolean</td> <td><code>false</code></td> <td>scroll-view 组件功能增强</td></tr> <tr><td>refresher-enabled</td> <td>Boolean</td> <td><code>false</code></td> <td>开启自定义下拉刷新</td></tr> <tr><td>scroll-anchoring</td> <td>Boolean</td> <td><code>false</code></td> <td>开启滚动区域滚动锚点</td></tr> <tr><td>scroll-into-view</td> <td>Boolean</td> <td><code>false</code></td> <td>值应为某子元素id（id不能以数字开头）</td></tr> <tr><td>refresher-default-style</td> <td>String</td> <td><code>'black'</code></td> <td>设置下拉刷新默认样式,支持 <code>black</code>、<code>white</code>、<code>none</code>，仅安卓支持</td></tr> <tr><td>refresher-background</td> <td>String</td> <td><code>'#fff'</code></td> <td>设置自定义下拉刷新背景颜色，仅安卓支持</td></tr> <tr><td>refresher-triggered</td> <td>Boolean</td> <td><code>false</code></td> <td>设置当前下拉刷新状态,true 表示已触发</td></tr> <tr><td>paging-enabled</td> <td>Number</td> <td><code>false</code></td> <td>分页滑动效果 (同时开启 enhanced 属性后生效)，当值为 true 时，滚动条会停在滚动视图的尺寸的整数倍位置</td></tr> <tr><td>show-scrollbar</td> <td>Number</td> <td><code>true</code></td> <td>滚动条显隐控制 (同时开启 enhanced 属性后生效)</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td><code>false</code></td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr> <tr><td>enable-trigger-intersection-observer</td> <td>Boolean</td> <td>[]</td> <td>是否开启intersection-observer</td></tr> <tr><td>simultaneous-handlers</td> <td>Array<object></object></td> <td>[]</td> <td>主要用于组件嵌套场景，允许多个手势同时识别和处理并触发，这个属性可以指定一个或多个手势处理器，处理器支持使用 this.$refs.xxx 获取组件实例来作为数组参数传递给 scroll-view 组件</td></tr> <tr><td>wait-for</td> <td>Array<object></object></td> <td>[]</td> <td>主要用于组件嵌套场景，允许延迟激活处理某些手势，这个属性可以指定一个或多个手势处理器，处理器支持使用 this.$refs.xxx 获取组件实例来作为数组参数传递给 scroll-view 组件</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>binddragstart</td> <td>滑动开始事件，同时开启 enhanced 属性后生效</td></tr> <tr><td>binddragging</td> <td>滑动事件，同时开启 enhanced 属性后生效</td></tr> <tr><td>binddragend</td> <td>滑动结束事件，同时开启 enhanced 属性后生效</td></tr> <tr><td>bindscrolltoupper</td> <td>滚动到顶部/左边触发</td></tr> <tr><td>bindscrolltolower</td> <td>滚动到底部/右边触发</td></tr> <tr><td>bindscroll</td> <td>滚动时触发</td></tr> <tr><td>bindrefresherrefresh</td> <td>自定义下拉刷新被触发</td></tr></tbody></table> <p>注意事项</p> <ol><li>目前不支持自定义下拉刷新节点，使用 slot=&quot;refresher&quot; 声明无效，在 React Native 环境中还是会被当作普通节点渲染出来</li> <li>若使用 scroll-into-view 属性，需要 id 对应的组件节点添加 wx:ref 标记，否则无法正常滚动</li> <li>simultaneous-handlers 为 RN 环境特有属性，具体含义可参考(react-native-gesture-handler)[https://docs.swmansion.com/react-native-gesture-handler/docs/fundamentals/gesture-composition/#simultaneouswithexternalgesture]</li> <li>wait-for  为 RN 环境特有属性，具体含义可参考(react-native-gesture-handler)[https://docs.swmansion.com/react-native-gesture-handler/docs/fundamentals/gesture-composition/#requireexternalgesturetofail]</li></ol> <h4 id="swiper"><a href="#swiper" class="header-anchor">#</a> swiper</h4> <p>滑块视图容器。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>indicator-dots</td> <td>Boolean</td> <td><code>false</code></td> <td>是否显示面板指示点</td></tr> <tr><td>indicator-color</td> <td>color</td> <td><code>rgba(0, 0, 0, .3)</code></td> <td>指示点颜色</td></tr> <tr><td>indicator-active-color</td> <td>color</td> <td><code>#000000</code></td> <td>当前选中的指示点颜色</td></tr> <tr><td>autoplay</td> <td>Boolean</td> <td><code>false</code></td> <td>是否自动切换</td></tr> <tr><td>current</td> <td>Number</td> <td><code>0</code></td> <td>当前所在滑块的 index</td></tr> <tr><td>interval</td> <td>Number</td> <td><code>5000</code></td> <td>自动切换时间间隔</td></tr> <tr><td>duration</td> <td>Number</td> <td><code>500</code></td> <td>滑动动画时长</td></tr> <tr><td>circular</td> <td>Boolean</td> <td><code>false</code></td> <td>是否采用衔接滑动</td></tr> <tr><td>vertical</td> <td>Boolean</td> <td><code>false</code></td> <td>滑动方向是否为纵向</td></tr> <tr><td>previous-margin</td> <td>String</td> <td><code>0</code></td> <td>前边距，可用于露出前一项的一小部分，接受px</td></tr> <tr><td>next-margin</td> <td>String</td> <td><code>0</code></td> <td>后边距，可用于露出后一项的一小部分，接受px</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td><code>false</code></td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr> <tr><td>easing-function</td> <td>String</td> <td><code>linear</code></td> <td>支持 linear、easeInCubic、easeOutCubic、easeInOutCubic</td></tr> <tr><td>bindchange</td> <td>eventhandle</td> <td>无</td> <td>current 改变时会触发 change 事件，event.detail = {current, source}</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindchange</td> <td>current 改变时会触发 change 事件，event.detail = {current, source}</td></tr></tbody></table> <h4 id="swiper-item"><a href="#swiper-item" class="header-anchor">#</a> swiper-item</h4> <ol><li>仅可放置在swiper组件中，宽高自动设置为100%。</li></ol> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>item-id</td> <td>string</td> <td><code>无</code></td> <td>该 swiper-item 的标识符</td></tr></tbody></table> <h4 id="movable-area"><a href="#movable-area" class="header-anchor">#</a> movable-area</h4> <p>movable-view的可移动区域。</p> <p>注意事项</p> <ol><li>movable-area不支持设置 scale-area，缩放手势生效区域仅在 movable-view 内</li></ol> <h4 id="movable-view"><a href="#movable-view" class="header-anchor">#</a> movable-view</h4> <p>可移动的视图容器，在页面中可以拖拽滑动。movable-view 必须在 movable-area 组件中，并且必须是直接子节点，否则不能移动。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>direction</td> <td>String</td> <td>none</td> <td>目前支持 all、vertical、horizontal、none｜</td></tr> <tr><td>inertia</td> <td>boolean</td> <td>false</td> <td>movable-view是否带有惯性｜</td></tr> <tr><td>out-of-bounds</td> <td>boolean</td> <td>false</td> <td>超过可移动区域后，movable-view是否还可以移动｜</td></tr> <tr><td>x</td> <td>Number</td> <td></td> <td>定义x轴方向的偏移</td></tr> <tr><td>y</td> <td>Number</td> <td></td> <td>定义y轴方向的偏移</td></tr> <tr><td>friction</td> <td>Number</td> <td>7</td> <td>摩擦系数</td></tr> <tr><td>disabled</td> <td>boolean</td> <td>false</td> <td>是否禁用</td></tr> <tr><td>animation</td> <td>boolean</td> <td>true</td> <td>是否使用动画</td></tr> <tr><td>simultaneous-handlers</td> <td>Array<object></object></td> <td>[]</td> <td>主要用于组件嵌套场景，允许多个手势同时识别和处理并触发，这个属性可以指定一个或多个手势处理器，处理器支持使用 this.$refs.xxx 获取组件实例来作为数组参数传递给 movable-view 组件</td></tr> <tr><td>wait-for</td> <td>Array<object></object></td> <td>[]</td> <td>主要用于组件嵌套场景，允许延迟激活处理某些手势，这个属性可以指定一个或多个手势处理器，处理器支持使用 this.$refs.xxx 获取组件实例来作为数组参数传递给 movable-view 组件</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindchange</td> <td>拖动过程中触发的事件，event.detail = {x, y, source}</td></tr> <tr><td>bindscale</td> <td>缩放过程中触发的事件，event.detail = {x, y, scale}</td></tr> <tr><td>htouchmove</td> <td>初次手指触摸后移动为横向的移动时触发</td></tr> <tr><td>vtouchmove</td> <td>初次手指触摸后移动为纵向的移动时触发</td></tr></tbody></table> <p>注意事项</p> <ol><li>simultaneous-handlers 为 RN 环境特有属性，具体含义可参考(react-native-gesture-handler)[https://docs.swmansion.com/react-native-gesture-handler/docs/fundamentals/gesture-composition/#simultaneouswithexternalgesture]</li> <li>wait-for  为 RN 环境特有属性，具体含义可参考(react-native-gesture-handler)[https://docs.swmansion.com/react-native-gesture-handler/docs/fundamentals/gesture-composition/#requireexternalgesturetofail]</li></ol> <h4 id="root-portal"><a href="#root-portal" class="header-anchor">#</a> root-portal</h4> <p>使整个子树从页面中脱离出来，类似于在 CSS 中使用 fixed position 的效果。主要用于制作弹窗、弹出层等。
属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody></tbody></table> <p>| enable   | boolean           |   true	     | 是否从页面中脱离出来	｜</p> <p>注意事项</p> <ol><li>style 样式不支持中使用百分比计算、css variable</li></ol> <h4 id="cover-view"><a href="#cover-view" class="header-anchor">#</a> cover-view</h4> <p>视图容器。
功能同 view 组件</p> <h4 id="cover-image"><a href="#cover-image" class="header-anchor">#</a> cover-image</h4> <p>视图容器。
功能同 image 组件</p> <h4 id="icon"><a href="#icon" class="header-anchor">#</a> icon</h4> <p>图标组件</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>type</td> <td>String</td> <td></td> <td>icon 的类型，有效值：success、success_no_circle、info、warn、waiting、cancel、download、search、clear</td></tr> <tr><td>size</td> <td>String | Number</td> <td>23</td> <td>icon 的大小</td></tr> <tr><td>color</td> <td>String</td> <td></td> <td>icon 的颜色，同 css 的 color</td></tr></tbody></table> <h4 id="text"><a href="#text" class="header-anchor">#</a> text</h4> <p>文本。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>user-select</td> <td>boolean</td> <td><code>false</code></td> <td>文本是否可选。</td></tr> <tr><td>disable-default-style</td> <td>boolean</td> <td><code>false</code></td> <td>会内置默认样式，比如fontSize为16。设置<code>true</code>可以禁止默认的内置样式。</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td>false</td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindtap</td> <td>点击的时候触发</td></tr></tbody></table> <p>注意事项</p> <ol><li>未包裹 text 标签的文本，会自动包裹 text 标签。</li> <li>text 组件开启 enable-offset 后，offsetLeft、offsetWidth 获取时机仅为组件首次渲染阶段</li></ol> <h4 id="button"><a href="#button" class="header-anchor">#</a> button</h4> <p>按钮。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>size</td> <td>String</td> <td><code>default</code></td> <td>按钮的大小</td></tr> <tr><td>type</td> <td>String</td> <td><code>default</code></td> <td>按钮的样式类型</td></tr> <tr><td>plain</td> <td>Boolean</td> <td><code>false</code></td> <td>按钮是否镂空，背景色透明</td></tr> <tr><td>disabled</td> <td>Boolean</td> <td><code>false</code></td> <td>是否禁用</td></tr> <tr><td>loading</td> <td>Boolean</td> <td><code>false</code></td> <td>名称前是否带 loading 图标</td></tr> <tr><td>open-type</td> <td>String</td> <td></td> <td>微信开放能力，当前仅支持 <code>share</code></td></tr> <tr><td>hover-class</td> <td>String</td> <td></td> <td>指定按钮按下去的样式类。当 hover-class=&quot;none&quot; 时，没有点击态效果</td></tr> <tr><td>hover-start-time</td> <td>Number</td> <td><code>20</code></td> <td>按住后多久出现点击态，单位毫秒</td></tr> <tr><td>hover-stay-time</td> <td>Number</td> <td><code>70</code></td> <td>手指松开后点击态保留时间，单位毫秒</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td><code>false</code></td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr></tbody></table> <h4 id="label"><a href="#label" class="header-anchor">#</a> label</h4> <p>用来改进表单组件的可用性</p> <p>注意事项</p> <ol><li>当前不支持使用 for 属性找到对应 id，仅支持将控件放在该标签内，目前可以绑定的空间有：checkbox、radio、switch。</li></ol> <h4 id="checkbox"><a href="#checkbox" class="header-anchor">#</a> checkbox</h4> <p>多选项目</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>String</td> <td></td> <td>checkbox 标识，选中时触发 checkbox-group 的 change 事件，并携带 checkbox 的 value</td></tr> <tr><td>disabled</td> <td>Boolean</td> <td>false</td> <td>是否禁用</td></tr> <tr><td>checked</td> <td>Boolean</td> <td>false</td> <td>当前是否选中，可用来设置默认选中</td></tr> <tr><td>color</td> <td>String</td> <td>#09BB07</td> <td>checkbox的颜色，同css的color</td></tr></tbody></table> <h4 id="checkbox-group"><a href="#checkbox-group" class="header-anchor">#</a> checkbox-group</h4> <p>多项选择器，内部由多个checkbox组成。</p> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindchange</td> <td>checkbox-group 中选中项发生改变时触发 change 事件，detail = { value: [ 选中的 checkbox 的 value 的数组 ] }</td></tr></tbody></table> <h4 id="radio"><a href="#radio" class="header-anchor">#</a> radio</h4> <p>单选项目</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>String</td> <td></td> <td>radio 标识，当该 radio 选中时，radio-group 的 change 事件会携带 radio 的 value</td></tr> <tr><td>disabled</td> <td>Boolean</td> <td>false</td> <td>是否禁用</td></tr> <tr><td>checked</td> <td>Boolean</td> <td>false</td> <td>当前是否选中，可用来设置默认选中</td></tr> <tr><td>color</td> <td>String</td> <td>#09BB07</td> <td>checkbox 的颜色，同 css 的 color</td></tr></tbody></table> <h4 id="radio-group"><a href="#radio-group" class="header-anchor">#</a> radio-group</h4> <p>单项选择器，内部由多个 radio 组成</p> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindchange</td> <td>radio-group 中选中项发生改变时触发 change 事件，detail = { value: [ 选中的 radio 的 value 的数组 ] }</td></tr></tbody></table> <h4 id="form"><a href="#form" class="header-anchor">#</a> form</h4> <p>表单。将组件内的用户输入的switch input checkbox slider radio picker 提交。</p> <p>当点击 form 表单中 form-type 为 submit 的 button 组件时，会将表单组件中的 value 值进行提交，需要在表单组件中加上 name 来作为 key。</p> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindsubmit</td> <td>携带 form 中的数据触发 submit 事件，event.detail = {value : {'name': 'value'} }</td></tr> <tr><td>bindreset</td> <td>表单重置时会触发 reset 事件</td></tr></tbody></table> <h4 id="input"><a href="#input" class="header-anchor">#</a> input</h4> <p>输入框。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>String</td> <td></td> <td>输入框的初始内容</td></tr> <tr><td>type</td> <td>String</td> <td><code>text</code></td> <td>input 的类型，不支持 <code>safe-password</code>、<code>nickname</code></td></tr> <tr><td>password</td> <td>Boolean</td> <td><code>false</code></td> <td>是否是密码类型</td></tr> <tr><td>placeholder</td> <td>String</td> <td></td> <td>输入框为空时占位符</td></tr> <tr><td>placeholder-class</td> <td>String</td> <td></td> <td>指定 placeholder 的样式类，仅支持 color 属性</td></tr> <tr><td>placeholder-style</td> <td>String</td> <td></td> <td>指定 placeholder 的样式，仅支持 color 属性</td></tr> <tr><td>disabled</td> <td>Boolean</td> <td><code>false</code></td> <td>是否禁用</td></tr> <tr><td>maxlength</td> <td>Number</td> <td><code>140</code></td> <td>最大输入长度，设置为 -1 的时候不限制最大长度</td></tr> <tr><td>auto-focus</td> <td>Boolean</td> <td><code>false</code></td> <td>(即将废弃，请直接使用 focus )自动聚焦，拉起键盘</td></tr> <tr><td>focus</td> <td>Boolean</td> <td><code>false</code></td> <td>获取焦点</td></tr> <tr><td>confirm-type</td> <td>String</td> <td><code>done</code></td> <td>设置键盘右下角按钮的文字，仅在 type='text' 时生效</td></tr> <tr><td>confirm-hold</td> <td>Boolean</td> <td><code>false</code></td> <td>点击键盘右下角按钮时是否保持键盘不收起</td></tr> <tr><td>cursor</td> <td>Number</td> <td></td> <td>指定 focus 时的光标位置</td></tr> <tr><td>cursor-color</td> <td>String</td> <td></td> <td>光标颜色</td></tr> <tr><td>selection-start</td> <td>Number</td> <td><code>-1</code></td> <td>光标起始位置，自动聚集时有效，需与 selection-end 搭配使用</td></tr> <tr><td>selection-end</td> <td>Number</td> <td><code>-1</code></td> <td>光标结束位置，自动聚集时有效，需与 selection-start 搭配使用</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td><code>false</code></td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindinput</td> <td>键盘输入时触发，event.detail = { value, cursor }，不支持 <code>keyCode</code></td></tr> <tr><td>bindfocus</td> <td>输入框聚焦时触发，event.detail = { value }，不支持 <code>height</code></td></tr> <tr><td>bindblur</td> <td>输入框失去焦点时触发，event.detail = { value }，不支持 <code>encryptedValue</code>、<code>encryptError</code></td></tr> <tr><td>bindconfirm</td> <td>点击完成按钮时触发，event.detail = { value }</td></tr> <tr><td>bind:selectionchange</td> <td>选区改变事件, event.detail = { selectionStart, selectionEnd }</td></tr></tbody></table> <p>方法</p> <p>可通过 <code>ref</code> 方式调用以下组件实例方法</p> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td>focus</td> <td>使输入框得到焦点</td></tr> <tr><td>blur</td> <td>使输入框失去焦点</td></tr> <tr><td>clear</td> <td>清空输入框的内容</td></tr> <tr><td>isFocused</td> <td>返回值表明当前输入框是否获得了焦点</td></tr></tbody></table> <h4 id="textarea"><a href="#textarea" class="header-anchor">#</a> textarea</h4> <p>多行输入框。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>String</td> <td></td> <td>输入框内容</td></tr> <tr><td>type</td> <td>String</td> <td><code>text</code></td> <td>input 的类型，不支持 <code>safe-password</code>、<code>nickname</code></td></tr> <tr><td>placeholder</td> <td>String</td> <td></td> <td>输入框为空时占位符</td></tr> <tr><td>placeholder-class</td> <td>String</td> <td></td> <td>指定 placeholder 的样式类，仅支持 color 属性</td></tr> <tr><td>placeholder-style</td> <td>String</td> <td></td> <td>指定 placeholder 的样式，仅支持 color 属性</td></tr> <tr><td>disabled</td> <td>Boolean</td> <td><code>false</code></td> <td>是否禁用</td></tr> <tr><td>maxlength</td> <td>Number</td> <td><code>140</code></td> <td>最大输入长度，设置为 -1 的时候不限制最大长度</td></tr> <tr><td>auto-focus</td> <td>Boolean</td> <td><code>false</code></td> <td>(即将废弃，请直接使用 focus )自动聚焦，拉起键盘</td></tr> <tr><td>focus</td> <td>Boolean</td> <td><code>false</code></td> <td>获取焦点</td></tr> <tr><td>auto-height</td> <td>Boolean</td> <td><code>false</code></td> <td>是否自动增高，设置 auto-height 时，style.height不生效</td></tr> <tr><td>confirm-type</td> <td>String</td> <td><code>done</code></td> <td>设置键盘右下角按钮的文字，不支持 <code>return</code></td></tr> <tr><td>confirm-hold</td> <td>Boolean</td> <td><code>false</code></td> <td>点击键盘右下角按钮时是否保持键盘不收起</td></tr> <tr><td>cursor</td> <td>Number</td> <td></td> <td>指定 focus 时的光标位置</td></tr> <tr><td>cursor-color</td> <td>String</td> <td></td> <td>光标颜色</td></tr> <tr><td>selection-start</td> <td>Number</td> <td><code>-1</code></td> <td>光标起始位置，自动聚集时有效，需与 selection-end 搭配使用</td></tr> <tr><td>selection-end</td> <td>Number</td> <td><code>-1</code></td> <td>光标结束位置，自动聚集时有效，需与 selection-start 搭配使用</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td><code>false</code></td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindinput</td> <td>键盘输入时触发，event.detail = { value, cursor }，不支持 <code>keyCode</code></td></tr> <tr><td>bindfocus</td> <td>输入框聚焦时触发，event.detail = { value }，不支持 <code>height</code></td></tr> <tr><td>bindblur</td> <td>输入框失去焦点时触发，event.detail = { value }，不支持 <code>encryptedValue</code>、<code>encryptError</code></td></tr> <tr><td>bindconfirm</td> <td>点击完成按钮时触发，event.detail = { value }</td></tr> <tr><td>bindlinechange</td> <td>输入框行数变化时调用，event.detail = { height: 0, lineCount: 0 }，不支持 <code>heightRpx</code></td></tr> <tr><td>bind:selectionchange</td> <td>选区改变事件, {selectionStart, selectionEnd}</td></tr></tbody></table> <p>方法</p> <p>可通过 <code>ref</code> 方式调用以下组件实例方法</p> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td>focus</td> <td>使输入框得到焦点</td></tr> <tr><td>blur</td> <td>使输入框失去焦点</td></tr> <tr><td>clear</td> <td>清空输入框的内容</td></tr> <tr><td>isFocused</td> <td>返回值表明当前输入框是否获得了焦点</td></tr></tbody></table> <h4 id="picker-view"><a href="#picker-view" class="header-anchor">#</a> picker-view</h4> <p>嵌入页面的滚动选择器。其中只可放置 picker-view-column组件，其它节点不会显示</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>Array[number]</td> <td><code>false</code></td> <td>数组中的数字依次表示 picker-view 内的 picker-view-column 选择的第几项（下标从 0 开始），数字大于 picker-view-column 可选项长度时，选择最后一项。</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindchange</td> <td>checkbox-group 中选中项发生改变时触发 change 事件，detail = { value: [ 选中的 checkbox 的 value 的数组 ] }</td></tr></tbody></table> <h4 id="picker-view-column"><a href="#picker-view-column" class="header-anchor">#</a> picker-view-column</h4> <p>滚动选择器子项。仅可放置于picker-view中，其孩子节点的高度会自动设置成与picker-view的选中框的高度一致</p> <h4 id="picker"><a href="#picker" class="header-anchor">#</a> picker</h4> <p>从底部弹起的滚动选择器。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>mode</td> <td>string</td> <td><code>selector</code></td> <td>选择器类型</td></tr> <tr><td>disabled</td> <td>boolean</td> <td><code>false</code></td> <td>是否禁用</td></tr></tbody></table> <p>公共事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>bindcancel</td> <td>取消选择时触发</td></tr> <tr><td>bindchange</td> <td>滚动选择时触发change事件，event.detail = {value}；value为数组，表示 picker-view 内的 picker-view-column 当前选择的是第几项（下标从 0 开始）</td></tr></tbody></table> <h5 id="普通选择器-mode-selector"><a href="#普通选择器-mode-selector" class="header-anchor">#</a> 普通选择器：mode = selector</h5> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>range</td> <td>array[object]/array</td> <td><code>[]</code></td> <td>mode 为 selector 或 multiSelector 时，range 有效</td></tr> <tr><td>range-key</td> <td>string</td> <td><code>false</code></td> <td>当 range 是一个 Object Array 时，通过 range-key 来指定 Object 中 key 的值作为选择器显示内容</td></tr> <tr><td>value</td> <td>number</td> <td>0</td> <td>表示选择了 range 中的第几个（下标从 0 开始）</td></tr></tbody></table> <h5 id="多列选择器-mode-multiselector"><a href="#多列选择器-mode-multiselector" class="header-anchor">#</a> 多列选择器：mode = multiSelector</h5> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>range</td> <td>array[object]/array</td> <td><code>[]</code></td> <td>mode 为 selector 或 multiSelector 时，range 有效</td></tr> <tr><td>range-key</td> <td>string</td> <td><code>false</code></td> <td>当 range 是一个 Object Array 时，通过 range-key 来指定 Object 中 key 的值作为选择器显示内容</td></tr> <tr><td>value</td> <td>array</td> <td><code>[]</code></td> <td>表示选择了 range 中的第几个（下标从 0 开始）</td></tr> <tr><td>bindcolumnchange</td> <td></td> <td></td> <td>列改变时触发</td></tr></tbody></table> <h5 id="多列选择器-时间选择器-mode-time"><a href="#多列选择器-时间选择器-mode-time" class="header-anchor">#</a> 多列选择器：时间选择器：mode = time</h5> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>string</td> <td><code>[]</code></td> <td>表示选中的时间，格式为&quot;hh:mm&quot;</td></tr> <tr><td>start</td> <td>string</td> <td><code>false</code></td> <td>表示有效时间范围的开始，字符串格式为&quot;hh:mm&quot;</td></tr> <tr><td>end</td> <td>string</td> <td><code>[]</code></td> <td>表示有效时间范围的结束，字符串格式为&quot;hh:mm&quot;</td></tr></tbody></table> <h5 id="多列选择器-时间选择器-mode-date"><a href="#多列选择器-时间选择器-mode-date" class="header-anchor">#</a> 多列选择器：时间选择器：mode = date</h5> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>string</td> <td><code>当天</code></td> <td>表示选中的日期，格式为&quot;YYYY-MM-DD&quot;</td></tr> <tr><td>start</td> <td>string</td> <td><code>false</code></td> <td>表示有效日期范围的开始，字符串格式为&quot;YYYY-MM-DD&quot;</td></tr> <tr><td>end</td> <td>string</td> <td><code>[]</code></td> <td>表示有效日期范围的结束，字符串格式为&quot;YYYY-MM-DD&quot;</td></tr> <tr><td>fields</td> <td>string</td> <td><code>day</code></td> <td>有效值 year,month,day，表示选择器的粒度</td></tr></tbody></table> <h5 id="fields-有效值"><a href="#fields-有效值" class="header-anchor">#</a> fields 有效值：</h5> <table><thead><tr><th>属性名</th> <th>说明</th></tr></thead> <tbody><tr><td>year</td> <td>选择器粒度为年</td></tr> <tr><td>month</td> <td>选择器粒度为月份</td></tr> <tr><td>day</td> <td>选择器粒度为天</td></tr></tbody></table> <h5 id="省市区选择器-mode-region"><a href="#省市区选择器-mode-region" class="header-anchor">#</a> 省市区选择器：mode = region</h5> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>value</td> <td>array</td> <td><code>[]</code></td> <td>表示选中的省市区，默认选中每一列的第一个值</td></tr> <tr><td>custom-item</td> <td>string</td> <td></td> <td>可为每一列的顶部添加一个自定义的项</td></tr> <tr><td>level</td> <td>string</td> <td><code>region</code></td> <td>选择器层级</td></tr></tbody></table> <h5 id="level-有效值"><a href="#level-有效值" class="header-anchor">#</a> level 有效值：</h5> <table><thead><tr><th>属性名</th> <th>说明</th></tr></thead> <tbody><tr><td>province</td> <td>选省级选择器</td></tr> <tr><td>city</td> <td>市级选择器</td></tr> <tr><td>region</td> <td>区级选择器</td></tr></tbody></table> <h4 id="image"><a href="#image" class="header-anchor">#</a> image</h4> <p>图片。</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>src</td> <td>String</td> <td><code>false</code></td> <td>图片资源地址，支持本地图片资源及 base64 格式数据，暂不支持 svg 格式</td></tr> <tr><td>mode</td> <td>String</td> <td><code>scaleToFill</code></td> <td>图片裁剪、缩放的模式，适配微信 image 所有 mode 格式</td></tr> <tr><td>enable-offset</td> <td>Number</td> <td><code>false</code></td> <td>设置是否要获取组件的布局信息，若设置了该属性，会在 e.target 中返回组件的 offsetLeft、offsetWidth 信息</td></tr></tbody></table> <p>事件</p> <table><thead><tr><th>事件名</th> <th>说明</th></tr></thead> <tbody><tr><td>binderror</td> <td>当错误发生时触发，event.detail = { errMsg }</td></tr> <tr><td>bindload</td> <td>当图片载入完毕时触发，event.detail = { height, width }</td></tr></tbody></table> <p>注意事项</p> <ol><li>image 组件默认宽度320px、高度240px</li> <li>image 组件进行缩放时，计算出来的宽高可能带有小数，在不同webview内核下渲染可能会被抹去小数部分</li></ol> <h4 id="canvas"><a href="#canvas" class="header-anchor">#</a> canvas</h4> <p>画布。</p> <p>事件</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>bindtouchstart</td> <td>eventhandle</td> <td>手指触摸动作开始</td></tr> <tr><td>bindtouchmove</td> <td>eventhandle</td> <td>手指触摸后移动</td></tr> <tr><td>bindtouchend</td> <td>eventhandle</td> <td>手指触摸动作结束</td></tr> <tr><td>bindtouchcancel</td> <td>eventhandle</td> <td>手指触摸动作被打断</td></tr> <tr><td>bindlongtap</td> <td>eventhandle</td> <td>手指长按 300ms 之后触发</td></tr> <tr><td>binderror</td> <td>eventhandle</td> <td>当发生错误时触发 error 事件， detail = {errMsg}</td></tr></tbody></table> <p>API</p> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td>createImage</td> <td>创建一个图片对象。 仅支持在 2D Canvas 中使用</td></tr> <tr><td>createImageData</td> <td>创建一个 ImageData 对象。仅支持在 2D Canvas 中使用</td></tr> <tr><td>getContext</td> <td>该方法返回 Canvas 的绘图上下文。仅支持在 2D Canvas 中使用</td></tr> <tr><td>toDataURL</td> <td>返回一个包含图片展示的 data URI</td></tr></tbody></table> <p>注意事项</p> <ol><li>canvas 组件目前仅支持 2D 类型，不支持 webgl</li> <li>通过 Canvas.getContext('2d') 接口可以获取 CanvasRenderingContext2D 对象，具体接口可以参考 (HTML Canvas 2D Context)[https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D] 定义的属性、方法</li> <li>canvas 的实现主要借助于 PostMessage 方式与 webview 容器通信进行绘制，所以对于严格依赖方法执行时机的场景，如调用 drawImage 绘图，再通过 getImageData 获取图片数据的场景，调用时需要使用 await 等方式来保证方法的执行时机</li> <li>通过 Canvas.createImage 画图，图片的链接不能有特殊字符，安卓手机可能会 load 失败</li></ol> <h5 id="web-view"><a href="#web-view" class="header-anchor">#</a> web-view</h5> <p>承载网页的容器。会自动铺满整个RN页面</p> <p>属性</p> <table><thead><tr><th>属性名</th> <th>类型</th> <th>默认值</th> <th>说明</th></tr></thead> <tbody><tr><td>src</td> <td>String</td> <td></td> <td>webview 指向网页的链接，如果需要对跳转的URL设定白名单可跳转，需要在业务跳转之前出来该逻辑</td></tr> <tr><td>bindmessage</td> <td>EventHandler</td> <td></td> <td>网页向RN通过 postMessage 传递数据</td></tr> <tr><td>bindload</td> <td>EventHandler</td> <td></td> <td>网页加载成功时候触发此事件</td></tr> <tr><td>binderror</td> <td>EventHandler</td> <td></td> <td>网页加载失败的时候触发此事件</td></tr></tbody></table> <p>注意事项</p> <ol><li>web-view网页中可使用@mpxjs/webview-bridge@2.9.68提供的接口返回RN页面或与RN页面通信，具体使用细节可以参见<a href="#WebviewAPI">Webview API</a></li></ol> <h4 id="自定义组件"><a href="#自定义组件" class="header-anchor">#</a> 自定义组件</h4> <h4 id="样式规则"><a href="#样式规则" class="header-anchor">#</a> 样式规则</h4> <h4 id="应用能力"><a href="#应用能力" class="header-anchor">#</a> 应用能力</h4> <h4 id="环境api"><a href="#环境api" class="header-anchor">#</a> 环境API</h4> <p>在RN环境中也提供了一部分常用api能力，方法名与使用方式与小程序相同，可能对于某个api提供的能力会比微信小程序提供的能力少一些，以下是使用说明：</p> <h5 id="使用说明"><a href="#使用说明" class="header-anchor">#</a> 使用说明</h5> <p>如果全量引入api-proxy这种情况下，需要如下配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 全量引入api-proxy</span>
<span class="token keyword">import</span> mpx <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token keyword">import</span> apiProxy <span class="token keyword">from</span> <span class="token string">'@didi/mpxjs-api-proxy'</span>
mpx<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>apiProxy<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">usePromise</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>需要在mpx项目中需要配置externals</p> <div class="language- extra-class"><pre class="language-text"><code>externals: {
  ...
  '@react-native-async-storage/async-storage': '@react-native-async-storage/async-storage',
  '@react-native-clipboard/clipboard': '@react-native-clipboard/clipboard',
  '@react-native-community/netinfo': '@react-native-community/netinfo',
  'react-native-device-info': 'react-native-device-info',
  'react-native-safe-area-context': 'react-native-safe-area-context',
  'react-native-reanimated': 'react-native-reanimated',
  'react-native-get-location': 'react-native-get-location',
  'react-native-haptic-feedback': 'react-native-haptic-feedback'
},
</code></pre></div><p>如果引用单独的api-proxy方法这种情况，需要根据下表说明是否用到一下方法，来确定是否需要配置externals，配置参考上面示例</p> <table><thead><tr><th>api方法</th> <th>依赖的react-native三方库</th></tr></thead> <tbody><tr><td>showActionSheet</td> <td>react-native-reanimated</td></tr> <tr><td>getNetworkType、<br>offNetworkStatusChange、<br>onNetworkStatusChange</td> <td>@react-native-community/netinfo</td></tr> <tr><td>getLocation、<br>openLocation、<br>chooseLocation</td> <td>react-native-get-location</td></tr> <tr><td>setStorage、<br> setStorageSync、<br>getStorage、<br> getStorageSync、<br>getStorageInfo、<br>getStorageInfoSync、<br>removeStorage，<br>removeStorageSync，<br>clearStorage，<br>clearStorageSync</td> <td>@react-native-async-storage/async-storage</td></tr> <tr><td>getSystemInfo、<br>getSystemInfoSync、<br>getDeviceInfo、<br>getWindowInfo、<br>getLaunchOptionsSync、<br>getEnterOptionsSync</td> <td>react-native-device-info</td></tr> <tr><td>getWindowInfo、<br>getLaunchOptionsSync、<br>getEnterOptionsSync</td> <td>react-native-safe-area-context</td></tr> <tr><td>vibrateShort、<br> vibrateLong</td> <td>react-native-haptic-feedback</td></tr></tbody></table> <p>在RN 项目中，如果是以全量引入api-proxy的方法需要在RN环境中执行以下所有的命令，如果只是使用单个api的能力，可以参考上表来判断安装对应的包</p> <div class="language- extra-class"><pre class="language-text"><code>// 安装api-proxy下所用到的依赖 如果
npm i @react-native-async-storage/async-storage
npm i @react-native-clipboard/clipboard
npm i @react-native-community/netinfo
npm i react-native-safe-area-context
npm i react-native-device-info
npm i react-native-reanimated
npm i react-native-haptic-feedback
ios项目需要执行如下命令
cd ios
pod install

npm i react-native-get-location
</code></pre></div><p>android下需要做如下配置：
安装react-native-get-location包后，需要在AndroidManifest.xml中定义位置权限，<a href="https://www.npmjs.com/package/react-native-get-location" target="_blank" rel="noopener noreferrer">参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- Define ACCESS_FINE_LOCATION if you will use enableHighAccuracy=true  --&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;

&lt;!-- Define ACCESS_COARSE_LOCATION if you will use enableHighAccuracy=false  --&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;

</code></pre></div><p>安装react-native-haptic-feedback包后需要在安卓中配置，<a href="https://github.com/mkuczera/react-native-haptic-feedback" target="_blank" rel="noopener noreferrer">配置参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
打开 android/app/src/main/java/[...]/MainApplication.java. 在文件的顶部添加以下导入下面的代码片段</p> <div class="language- extra-class"><pre class="language-text"><code>import com.mkuczera.RNReactNativeHapticFeedbackPackage;
</code></pre></div><p>修改设置,将下面的配置添加到android/settings.gradle文件中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>include <span class="token string">':react-native-haptic-feedback'</span>
<span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':react-native-haptic-feedback'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>projectDir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>rootProject<span class="token punctuation">.</span>projectDir<span class="token punctuation">,</span> <span class="token string">'../node_modules/react-native-haptic-feedback/android'</span><span class="token punctuation">)</span>
</code></pre></div><p>react-native-reanimated在mpx和RN项目都要安装，安装好包后需要在babel.config.json文件中做如下配置，并且RN环境中使用的react-native-reanimated与mpx项目中安装的react-native-reanimated版本要一致：
<a href="https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/getting-started/" target="_blank" rel="noopener noreferrer">配置参考文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span> <span class="token comment">// don't add it here :)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span>
      <span class="token string">'react-native-reanimated/plugin'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div> <h4 id="webview-api"><a href="#webview-api" class="header-anchor">#</a> Webview API</h4> <p>对于web-view组件打开的网页，想要跟RN通信，或者跳转到RN页面，提供了以下能力</p> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td>navigateTo</td> <td>保留当前webview页面，跳转RN页面</td></tr> <tr><td>navigateBack</td> <td>关闭当前页面，返回上一页或多级RN页面</td></tr> <tr><td>switchTab</td> <td>跳转到RN的 tabBar 页面</td></tr> <tr><td>reLaunch</td> <td>关闭所有页面，打开到应用内的某个RN页面</td></tr> <tr><td>redirectTo</td> <td>关闭当前页面，跳转到应用内的某个RN页面</td></tr> <tr><td>getEnv</td> <td>获取当前环境</td></tr> <tr><td>postMessage</td> <td>向RN发送消息，实时触发组件的message事件</td></tr> <tr><td>invoke</td> <td>开放一个webview页面和web页面互通消息的能力</td></tr></tbody></table> <h5 id="webview-bridge示例代码"><a href="#webview-bridge示例代码" class="header-anchor">#</a> webview-bridge示例代码</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> webviewBridge <span class="token keyword">from</span> <span class="token string">'@mpxjs/webview-bridge'</span>
webviewBridge<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'RN地址'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'跳转成功'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="invoke示例代码"><a href="#invoke示例代码" class="header-anchor">#</a> invoke示例代码</h5> <p>RN环境中挂载getTime的逻辑</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> mpx <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token operator">...</span>
<span class="token comment">// 普通方法</span>
mpx<span class="token punctuation">.</span>config<span class="token punctuation">.</span>webviewConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">apiImplementations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getTime</span><span class="token operator">:</span>  <span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> options
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> params<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token string">'2024-12-24'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者promise</span>
mpx<span class="token punctuation">.</span>config<span class="token punctuation">.</span>webviewConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">apiImplementations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getTime</span><span class="token operator">:</span>  <span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> options
        <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">text</span><span class="token operator">:</span> params<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
            <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token string">'2024-12-24'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'没有传text参数'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
</code></pre></div><p>web中通信的逻辑</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> webviewBridge <span class="token keyword">from</span> <span class="token string">'@mpxjs/webview-bridge'</span>
webviewBridge<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">'getTime'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'我是入参'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'接收到的消息：'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="其他使用限制"><a href="#其他使用限制" class="header-anchor">#</a> 其他使用限制</h4> <p>如事件的target等</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div></div></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.84c88b57.js" defer></script><script src="/assets/js/7.01e4e942.js" defer></script><script src="/assets/js/3.145e69cd.js" defer></script><script src="/assets/js/1.4f7abe8f.js" defer></script><script src="/assets/js/109.3da50cc1.js" defer></script><script src="/assets/js/30.04d1a7ea.js" defer></script>
  </body>
</html>
