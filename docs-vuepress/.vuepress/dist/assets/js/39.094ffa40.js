(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{388:function(t,a,s){"use strict";s.r(a);var n=s(4),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"组合式-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组合式-api"}},[t._v("#")]),t._v(" 组合式 API")]),t._v(" "),a("h2",{attrs:{id:"setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[t._v("#")]),t._v(" setup")]),t._v(" "),a("p",[t._v("一个组件选项，在组件被创建之前，props 被解析之后执行。是组合式 API 的入口。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("参数")]),t._v("：\n"),a("ul",[a("li",[a("code",[t._v("{Data} props")])]),t._v(" "),a("li",[a("code",[t._v("{SetupContext} context")])])])])]),t._v(" "),a("p",[t._v("该 "),a("strong",[t._v("props")]),t._v(" 对象仅包含显性声明的 properties。并且所有声明了的prop，不论父组件是否向其传递，\n都将出现在 "),a("strong",[t._v("props")]),t._v(" 对象中。其中未被传入的可选的 prop 的值会是默认值或 undefined。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@mpxjs/core'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("properties")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastLeaf")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这个属性可以是 Number 、 String 、 Boolean 三种类型中的一种")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("optionalTypes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("min"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastLeaf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("strong",[t._v("类型声明")]),t._v("：")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SetupContext")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("triggerEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n       name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       detail"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// detail对象，提供给事件监听函数")]),t._v("\n       options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         bubbles"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n         composed"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n         capturePhase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n    refs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ObjectOf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("NodesRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" ComponentIns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    asyncRefs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ObjectOf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("NodesRef "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" ComponentIns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字节小程序特有")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("nextTick")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("forceUpdate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ComponentIns\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectAllComponents")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("selector"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ComponentIns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createSelectorQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SelectorQuery\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createIntersectionObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        thresholds"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        initialRatio"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v("\n        observeAll"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" IntersectionObserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SetupContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"生命周期钩子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期钩子"}},[t._v("#")]),t._v(" 生命周期钩子")]),t._v(" "),a("p",[t._v("可以通过直接导入 on* 函数来注册生命周期钩子：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onMounted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onUpdated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onUnmounted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createComponent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@mpxjs/core'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mounted!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updated!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUnmounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unmounted!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("这些生命周期钩子注册函数只能在 setup() 期间同步使用，因为它们依赖于内部的全局状态来定位当前活动的实例 (此时正在调用其 setup() 的组件实例)。\n在没有当前活动实例的情况下，调用它们将会出错。")]),t._v(" "),a("p",[t._v("组件实例的上下文也是在生命周期钩子的同步执行期间设置的，因此，在生命周期钩子内同步创建的侦听器和计算属性也会在组件卸载时自动删除。")]),t._v(" "),a("p",[t._v("新版本的生命周期钩子我们基本上和 Vue 中的生命周期钩子对齐，相较于之前还是有部分生命周期钩子的改动。")]),t._v(" "),a("h3",{attrs:{id:"onbeforemount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onbeforemount"}},[t._v("#")]),t._v(" onBeforeMount")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("在组件布局完成后执行，refs 相关的前置工作在该钩子中执行。")]),t._v(" "),a("h3",{attrs:{id:"onmounted"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onmounted"}},[t._v("#")]),t._v(" onMounted")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("在组件布局完成后执行，refs 可以直接获取。")]),t._v(" "),a("h3",{attrs:{id:"onbeforeupdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onbeforeupdate"}},[t._v("#")]),t._v(" onBeforeUpdate")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("在数据发生改变后，组件/页面更新之前被调用。这里适合在现有组件/页面将要被更新之前访问它，\n比如移除某个手动添加的监听器，或者获取某个元素更新前的高度。")]),t._v(" "),a("h3",{attrs:{id:"onupdated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onupdated"}},[t._v("#")]),t._v(" onUpdated")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("在数据更改导致的页面/组件重新渲染和更新完毕之后被调用。")]),t._v(" "),a("p",[t._v("注意，onUpdated 不会保证所有的子组件也都被重新渲染完毕。如果你希望等待整个视图都渲染完毕，可以在 onUpdated 内部使用 nextTick。")]),t._v(" "),a("h3",{attrs:{id:"onbeforeunmount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onbeforeunmount"}},[t._v("#")]),t._v(" onBeforeUnmount")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("在卸载组件/页面实例之前调用。在这个阶段，实例仍然是完全正常的。")]),t._v(" "),a("h3",{attrs:{id:"onunmount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onunmount"}},[t._v("#")]),t._v(" onUnmount")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除。")]),t._v(" "),a("h3",{attrs:{id:"onload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onload"}},[t._v("#")]),t._v(" onLoad")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序页面 onLoad 事件，监听页面加载。")]),t._v(" "),a("h3",{attrs:{id:"onshow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onshow"}},[t._v("#")]),t._v(" onShow")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序页面 onShow 事件，监听页面展示。")]),t._v(" "),a("h3",{attrs:{id:"onhide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onhide"}},[t._v("#")]),t._v(" onHide")]),t._v(" "),a("p",[a("code",[t._v("Function")]),t._v("\n小程序页面 onHide 事件，监听页面隐藏。")]),t._v(" "),a("h3",{attrs:{id:"onresize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onresize"}},[t._v("#")]),t._v(" onResize")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序页面 onResize 事件，页面尺寸改变时触发。")]),t._v(" "),a("h3",{attrs:{id:"onpulldownrefresh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onpulldownrefresh"}},[t._v("#")]),t._v(" onPullDownRefresh")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序监听用户下拉刷新事件。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPullDownRefresh",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"onreachbottom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onreachbottom"}},[t._v("#")]),t._v(" onReachBottom")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序监听用户上拉触底事件。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onReachBottom",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"onshareappmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onshareappmessage"}},[t._v("#")]),t._v(" onShareAppMessage")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v('小程序监听用户点击页面内转发按钮（button 组件 open-type="share"）或右上角菜单“转发”按钮的行为，并自定义转发内容。'),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareAppMessage-Object-object",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"onsharetimeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onsharetimeline"}},[t._v("#")]),t._v(" onShareTimeline")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序监听右上角菜单“分享到朋友圈”按钮的行为，并自定义分享内容。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShareTimeline",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("注意：")]),t._v(" 仅微信小程序支持")]),t._v(" "),a("h3",{attrs:{id:"onaddtofavorites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onaddtofavorites"}},[t._v("#")]),t._v(" onAddToFavorites")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序监听用户点击右上角菜单“收藏”按钮的行为，并自定义收藏内容。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onAddToFavorites-Object-object",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("注意：")]),t._v(" 仅微信小程序支持")]),t._v(" "),a("h3",{attrs:{id:"onpagescroll"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onpagescroll"}},[t._v("#")]),t._v(" onPageScroll")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("小程序监听用户滑动页面事件。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPageScroll-Object-object",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"ontabitemtap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ontabitemtap"}},[t._v("#")]),t._v(" onTabItemTap")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("点击 tab 时触发。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onTabItemTap-Object-object",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"onsaveexitstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onsaveexitstate"}},[t._v("#")]),t._v(" onSaveExitState")]),t._v(" "),a("p",[a("code",[t._v("Function")])]),t._v(" "),a("p",[t._v("每当小程序可能被销毁之前，页面回调函数 onSaveExitState 会被调用，可以进行退出状态的保存。"),a("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onSaveExitState",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细介绍"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("注意：")]),t._v(" 仅微信小程序支持")]),t._v(" "),a("h3",{attrs:{id:"onserverprefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onserverprefetch"}},[t._v("#")]),t._v(" onServerPrefetch")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("类型：")]),t._v(" "),a("code",[t._v("Function")])]),t._v(" "),a("li",[a("strong",[t._v("详细：")])])]),t._v(" "),a("p",[t._v("SSR渲染定制钩子，在服务端渲染期间被调用，可以实现在服务端进行数据预取。")]),t._v(" "),a("p",[a("strong",[t._v("注意：")]),t._v(" 仅 web 环境支持")]),t._v(" "),a("h2",{attrs:{id:"getcurrentinstance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getcurrentinstance"}},[t._v("#")]),t._v(" getCurrentInstance")]),t._v(" "),a("p",[t._v("getCurrentInstance 支持访问内部组件实例。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("注意：")])])]),t._v(" "),a("p",[t._v("getCurrentInstance 只暴露给高阶使用场景，典型的比如在库中。强烈反对在应用的代码中使用 getCurrentInstance。请不要把它当作在组合式 API 中获取 this 的替代方案来使用。")]),t._v(" "),a("p",[t._v("getCurrentInstance 只能在 setup 或生命周期钩子中调用。")]),t._v(" "),a("h2",{attrs:{id:"usei18n"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usei18n"}},[t._v("#")]),t._v(" useI18n")]),t._v(" "),a("p",[t._v("点击"),a("RouterLink",{attrs:{to:"/api/extend.html#usei18n"}},[t._v("查看详情")])],1),t._v(" "),a("h2",{attrs:{id:"usefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usefetch"}},[t._v("#")]),t._v(" useFetch")]),t._v(" "),a("p",[t._v("点击"),a("RouterLink",{attrs:{to:"/api/extend.html#usefetch"}},[t._v("查看详情")])],1)])}),[],!1,null,null,null);a.default=e.exports}}]);