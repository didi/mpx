/**
 * mpxjs webview bridge v2.9.14
 * (c) 2024 @mpxjs team
 * @license Apache
 */
/**
 * mpxjs webview bridge v2.9.14
 * (c) 2024 @mpxjs team
 * @license Apache
 */
let e;const o={wx:{url:"https://res.wx.qq.com/open/js/jweixin-1.3.2.js"},qq:{url:"https://qqq.gtimg.cn/miniprogram/webview_jssdk/qqjssdk-1.0.0.js"},my:{url:"https://appx/web-view.min.js"},baidu:{url:"https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.4.js"},tt:{url:"https://s3.pstatp.com/toutiao/tmajssdk/jssdk.js"},...window.sdkUrlMap};let a=null,t=0;const n={},i=navigator.userAgent;i.indexOf("AlipayClient")>-1&&i.indexOf("MiniProgram")>-1?a="my":i.toLowerCase().indexOf("miniprogram")>-1?a=i.indexOf("QQ")>-1?"qq":"wx":i.indexOf("swan")>-1?a="swan":i.indexOf("toutiao")>-1?a="tt":(a="web",window.addEventListener("message",e=>{const{callbackId:o,error:a,result:t}=e.data;void 0!==o&&n[o]&&(a?n[o](a):n[o](null,t),delete n[o])},!1));let s=!1;function r(o){s?o():e.then(()=>{s=!0,o()})}const c={config(e){"wx"===a?r(()=>{window.wx&&window.wx.config(e)}):console.warn("\u975e\u5fae\u4fe1\u73af\u5883\u4e0d\u9700\u8981\u914d\u7f6econfig")}};function d(e){if("[object Object]"!==Object.prototype.toString.call(e))return e;const o={};for(const a in e)"function"!=typeof e[a]&&(o[a]=e[a]);return o}const g=()=>{const e={wx:{keyName:"miniProgram",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","postMessage","getEnv"]},tt:{keyName:"miniProgram",api:["redirectTo","navigateTo","switchTab","reLaunch","navigateBack","setSwipeBackModeSync","postMessage","getEnv","checkJsApi","chooseImage","compressImage","previewImage","uploadFile","getNetworkType","openLocation","getLocation"]},swan:{keyName:"webView",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage"]},qq:{keyName:"miniProgram",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage"]}}[a]||{},o={wx:["checkJSApi","chooseImage","previewImage","uploadImage","downloadImage","getLocalImgData","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","translateVoice","getNetworkType","openLocation","getLocation","startSearchBeacons","stopSearchBeacons","onSearchBeacons","scanQRCode","chooseCard","addCard","openCard"],my:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","chooseImage","previewImage","getLocation","openLocation","alert","showLoading","hideLoading","getNetworkType","startShare","tradePay","postMessage","onMessage","getEnv"],swan:["makePhoneCall","setClipboardData","getNetworkType","openLocation","getLocation","chooseLocation","chooseImage","previewImage","openShare","navigateToSmartProgram"],web:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage","getLoadError","getLocation"]}[a]||{};(e.api||[]).forEach(o=>{c[o]=(...t)=>{r(()=>{window[a][e.keyName][o](...t)})}}),o.forEach(e=>{c[e]=(...o)=>{"web"===a?function(e,o={}){if("getEnv"!==e){const a=++t;n[a]=(e,t)=>{e?(o.fail&&o.fail(e),o.complete&&o.complete(e)):(o.success&&o.success(t),o.complete&&o.complete(t)),delete n[a]},window.parent.postMessage&&window.parent.postMessage({type:e,callbackId:t,payload:d(o)},"*")}else o({webapp:!0})}(e,...o):r("wx"===a?()=>{window[a]&&window[a].ready(()=>{window[a][e](...o)})}:()=>{window[a][e](...o)})}})};e="web"!==a?o[a].url?function(e,{time:o=5e3,crossOrigin:a=!1}={}){return Promise.race([new Promise((o,t)=>{const n=document.createElement("script");n.type="text/javascript",n.async="async",a&&(n.crossOrigin="anonymous"),n.onload=n.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(o(),n.onload=n.onreadystatechange=null)},n.onerror=function(){t(new Error(`load ${e} error`)),n.onerror=null},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}),new Promise((a,t)=>{setTimeout(()=>{t(new Error(`load ${e} timeout`))},o)})])}(o[a].url):Promise.reject(new Error("\u672a\u627e\u5230\u5bf9\u5e94\u7684sdk")):Promise.resolve(),g();export default c;