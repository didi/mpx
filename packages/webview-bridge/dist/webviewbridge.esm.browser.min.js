/**
 * mpxjs webview bridge v2.10.3
 * (c) 2025 @mpxjs team
 * @license Apache
 */
let e;const a=Object.assign({wx:{url:"https://res.wx.qq.com/open/js/jweixin-1.3.2.js"},qq:{url:"https://qqq.gtimg.cn/miniprogram/webview_jssdk/qqjssdk-1.0.0.js"},my:{url:"https://appx/web-view.min.js"},swan:{url:"https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.4.js"},tt:{url:"https://lf3-cdn-tos.bytegoofy.com/obj/goofy/developer/jssdk/jssdk-1.2.1.js"}},window.sdkUrlMap);let o=null,t=0;const n=function(){const e=location.href,a=/mpx_webview_id=(\d+)/g.exec(e);let o;return a&&a[1]&&(o=+a[1]),o}(),i={},s=e=>{const{callbackId:a,error:o,result:t}=e;void 0!==a&&i[a]&&(o?i[a](o):i[a](null,t),delete i[a])},c=e=>{let a=e.data;try{"string"==typeof a&&(a=JSON.parse(a))}catch(e){}s(a)},r=navigator.userAgent;r.indexOf("AlipayClient")>-1&&r.indexOf("MiniProgram")>-1?o="my":r.toLowerCase().indexOf("miniprogram")>-1?o=r.indexOf("QQ")>-1?"qq":"wx":r.indexOf("swan/")>-1?o="swan":r.toLocaleLowerCase().indexOf("toutiao")>-1?o="tt":window.ReactNativeWebView?(o="rn",window.mpxWebviewMessageCallback=s):(o="web",window.addEventListener("message",c,!1));let w=!1;function d(a){w?a():e.then(()=>{w=!0,a()})}const g={config(e){"wx"===o?d(()=>{window.wx&&window.wx.config(e)}):console.warn("\u975e\u5fae\u4fe1\u73af\u5883\u4e0d\u9700\u8981\u914d\u7f6econfig")}};const p=()=>{const e={wx:{keyName:"miniProgram",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","postMessage","getEnv"]},tt:{keyName:"miniProgram",api:["redirectTo","navigateTo","switchTab","reLaunch","navigateBack","setSwipeBackModeSync","postMessage","getEnv","checkJsApi","chooseImage","compressImage","previewImage","uploadFile","getNetworkType","openLocation","getLocation"]},swan:{keyName:"webView",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage"]},qq:{keyName:"miniProgram",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage"]}}[o]||{},a={wx:["checkJSApi","chooseImage","previewImage","uploadImage","downloadImage","getLocalImgData","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","translateVoice","getNetworkType","openLocation","getLocation","startSearchBeacons","stopSearchBeacons","onSearchBeacons","scanQRCode","chooseCard","addCard","openCard"],my:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","chooseImage","previewImage","getLocation","openLocation","alert","showLoading","hideLoading","getNetworkType","startShare","tradePay","postMessage","onMessage","getEnv"],swan:["makePhoneCall","setClipboardData","getNetworkType","openLocation","getLocation","chooseLocation","chooseImage","previewImage","openShare","navigateToSmartProgram"],web:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage","getLocation","invoke"],rn:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage","getLocation","invoke"],tt:[]}[o]||[];(e.api||[]).forEach(a=>{g[a]=(...t)=>{d(()=>{window[o][e.keyName][a](...t)})}}),a.forEach(e=>{g[e]=(...a)=>{"web"===o||"rn"===o?function(e,...a){"invoke"===e&&(e=a[0],a=a.slice(1));const o=a[0]||{};if("getEnv"!==e){const s=++t;i[s]=(e,a)=>{e?(o.fail&&o.fail(e),o.complete&&o.complete(e)):(o.success&&o.success(a),o.complete&&o.complete(a)),delete i[s]};const c={type:e,callbackId:t,args:a};void 0!==n&&(c.clientUid=n),window.ReactNativeWebView?window.ReactNativeWebView.postMessage&&window.ReactNativeWebView.postMessage(JSON.stringify(c)):window.parent.postMessage&&window.parent.postMessage(JSON.stringify(c),"*")}else{let e={webapp:!0};window.ReactNativeWebView&&(e={reactNative:!0}),o(e)}}(e,...a):d("wx"===o?()=>{window[o]&&window[o].ready(()=>{window[o][e](...a)})}:()=>{window[o][e](...a)})}})};e="web"!==o&&"rn"!==o?a[o].url?function(e,{time:a=5e3,crossOrigin:o=!1}={}){return Promise.race([new Promise((a,t)=>{const n=document.createElement("script");n.type="text/javascript",n.async="async",o&&(n.crossOrigin="anonymous"),n.onload=n.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(a(),n.onload=n.onreadystatechange=null)},n.onerror=function(){t(new Error(`load ${e} error`)),n.onerror=null},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}),new Promise((o,t)=>{setTimeout(()=>{t(new Error(`load ${e} timeout`))},a)})])}(a[o].url):Promise.reject(new Error("\u672a\u627e\u5230\u5bf9\u5e94\u7684sdk")):Promise.resolve(),p();export default g;